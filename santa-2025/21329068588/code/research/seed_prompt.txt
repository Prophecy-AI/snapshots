# Santa 2025 - Christmas Tree Packing Optimization

## Current Status
- Best CV score: 70.626088 (from validated snapshot 21198927060/candidate_024.csv)
- Best LB score: 70.626088 (validated by Kaggle in previous run)
- Target: 68.892266 | Gap to target: 1.73 points (2.5%)

## CRITICAL LESSON FROM LOOP 3

**The submission failed because we used an UNVALIDATED submission as the starting point!**

- bbox3 started from snapshot 21198927060/submission.csv (70.624424)
- This submission was NEVER validated by Kaggle - it already had overlaps
- The error "Overlapping trees in group 008" was NOT introduced by bbox3
- **ALWAYS use Kaggle-validated submissions as starting points**

Best validated submissions:
1. `/home/nonroot/snapshots/santa-2025/21198927060/code/submission_candidates/candidate_024.csv` (LB: 70.626088)
2. `/home/nonroot/snapshots/santa-2025/21198893057/code/submission.csv` (LB: 70.627582)

## Response to Evaluator

The evaluator correctly identified:
1. ✓ bbox3 achieved ZERO improvement - the solution is at a local optimum
2. ✓ We need fundamentally different approaches
3. ✓ Try sa_fast_v2 as an alternative optimizer

However, the evaluator missed a critical issue:
- The source submission (70.624424) was NEVER validated by Kaggle
- It already had overlaps that caused the submission failure
- This is why the submission failed, not because bbox3 introduced overlaps

## What Has Been Tried (From Snapshot 21198927060)

The snapshot ran **25 experiments** with these approaches - most showed NO improvement:
- Ensemble, bbox3, SA, tessellation, basin hopping, constraint programming all FAILED
- Only "iterative refinement" achieved the best score (70.626088)
- 25 experiments only improved by 0.02 points (70.647 → 70.626)

**Key insight**: The solution is deeply stuck at a local optimum.

## Recommended Approaches (Priority Order)

### 1. [IMMEDIATE] Submit the validated baseline
Submit candidate_024.csv (70.626088) to establish our LB score.
```bash
cp /home/nonroot/snapshots/santa-2025/21198927060/code/submission_candidates/candidate_024.csv /home/submission/submission.csv
```

### 2. [HIGH PRIORITY] Try sa_fast_v2 optimizer on validated baseline
```bash
cp /home/nonroot/snapshots/santa-2025/21198927060/code/submission_candidates/candidate_024.csv submission.csv
./sa_fast_v2 -i submission.csv -n 15000 -r 80
```

### 3. [HIGH PRIORITY] Backward propagation (chistyakov approach)
Start from N=200, work backward, try removing trees that touch bounding box.
This is fundamentally different from forward optimization.

### 4. [MEDIUM PRIORITY] Research novel algorithms
- No-Fit Polygon (NFP) for O(1) overlap checks
- Branch-and-bound for small N
- Genetic algorithms with custom crossover

## What NOT to Try
- ❌ bbox3 with more iterations (ZERO improvement)
- ❌ Starting from unvalidated submissions (causes overlap errors)
- ❌ Simple SA variations (25 experiments already tried)
- ❌ Tessellation for large N (WORSE than baseline)

## SUBMISSION STRATEGY
- Remaining submissions: 97
- **SUBMIT AGGRESSIVELY** - we have abundant submissions
- Submit after EVERY experiment to get LB feedback