# Seed Prompt: Santa 2025 Tree Packing

## Problem Definition
- **Goal**: Pack $N$ identical Christmas trees (irregular 2D polygons) into the smallest square box for each $N \in [1, 200]$.
- **Metric**: Minimize $\sum_{n=1}^{200} \frac{s_n^2}{n}$, where $s_n$ is the side of the bounding square.
- **Constraints**: No overlap. Coordinates in $[-100, 100]$.
- **Independence**: Each $N$ is an independent problem.

## Tree Geometry
Defined in `inversion/santa-2025-getting-started`:
- Polygon with specific vertices (trunk, 3 tiers).
- Rotatable.

## Top Approaches from Public Kernels
- **Greedy Construction** (`inversion`): Build $N$ from $N-1$, add new tree, move to center. Suboptimal because it constrains $N$ to contain $N-1$ configuration.
- **Independent Optimization**: We must optimize each $N$ independently.

## Potential Techniques (to be verified)
1. **Physics Simulation**:
   - Treat trees as rigid bodies.
   - Apply forces towards the center (gravity/centripetal).
   - Use a physics engine (Box2D, PyBullet, or custom simple one).
   - "Shake" the container to settle.

2. **Optimization Algorithms**:
   - **Simulated Annealing (SA)**: Perturb positions/rotations, accept if better or with probability.
   - **CMA-ES**: Good for continuous optimization of coordinates/angles.
   - **Basin Hopping**: Global optimization.

3. **Overlap Minimization**:
   - Define an objective function: $Area + \lambda \times Overlap$.
   - Minimize overlap to 0.
   - Use differentiable collision detection if possible (e.g., separating axis theorem distances).

4. **Pattern Search**:
   - For large $N$, trees might form patterns (lattice-like).
   - Exploit symmetry?

## Recommended Experiments
1. **Physics-based Packer**: Implement a simple 2D physics simulation where trees attract to center and repel each other.
2. **Simulated Annealing**: Start with a random/greedy configuration and refine it.
3. **Differential Evolution / CMA-ES**: Optimize the $(x, y, \theta)$ vector for $N$ trees. Dimension is $3N$. For $N=200$, $600$ dims might be hard for CMA-ES, but fine for smaller $N$.

## Validation
- Local scoring function using `shapely` for exact overlap check.
- Metric calculation is straightforward.

