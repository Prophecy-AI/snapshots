# Christmas Tree Packing Optimization - Seed Prompt (Loop 7)

## Current Status
- **Best CV score**: 70.681004 from exp_005 (Grid Translation + Backward Propagation)
- **Best LB score**: 70.681004 (CONFIRMED - perfect CV=LB alignment!)
- **Target**: 68.922808 | **Gap to target**: 1.758 points (2.55%)
- **Submissions used**: 3/100 (97 remaining - ABUNDANT!)

## CV-LB Relationship Analysis
- CV = LB perfectly (correlation = 1.0, gap = 0.0)
- This is an optimization problem, not a prediction problem
- No distribution shift - what we compute locally IS the LB score
- **Implication**: Any improvement in CV will directly translate to LB improvement

## Public Kernel Status (CRITICAL!)
- **Have we implemented the best kernel yet?** PARTIALLY
- **Top kernels identified**:
  1. saspav/santa-submission (403 votes) - uses santa-2025.csv + bbox3
  2. smartmanoj/santa-claude (372 votes) - C++ with swap moves
  3. jazivxt/why-not (291 votes) - uses bucket-of-chump dataset
  4. jonathanchan/santa25-ensemble-sa-fractional-translation (174 votes) - **ENSEMBLE FROM 19+ SOURCES**
- **Kernels we've implemented**: chistyakov baseline, bbox3 optimizer, backward propagation
- **Kernels still to implement**: 
  - **jonathanchan ensemble approach** (combines 19+ sources!)
  - **Asymmetric solution generation**

## Response to Evaluator
The evaluator correctly identified that:
1. Local search methods (SA, swaps, squeeze) cannot escape the local optimum - CONFIRMED
2. External pre-optimized solutions need to be explored - AGREED, this is the priority
3. The baseline was created with extensive optimization over weeks/months - AGREED

**Key insight from research**: The winning approach is **ASYMMETRIC SOLUTIONS**. Symmetric layouts hit a computational ceiling around N=60. By relaxing symmetry and running exhaustive stochastic search, solvers can achieve scores below 68. Example: N=22 asymmetric achieved <0.36 vs our 0.375258.

## CRITICAL DISCOVERY: Asymmetric Solutions
Web search revealed that the key to sub-68 scores is **breaking symmetry**:
- Symmetric layouts force trees into same geometric constraints
- Asymmetric configurations explore vastly larger solution space
- N=22 asymmetric: <0.36 (vs symmetric ~0.375)
- This approach pushes overall score under 68

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Implement jonathanchan Ensemble Approach
The jonathanchan kernel combines solutions from 19+ sources:
- `/kaggle/input/bucket-of-chump` (jazivxt dataset)
- `SmartManoj/Santa-Scoreboard` GitHub repo
- `/kaggle/input/telegram-public-shared-solution-for-santa-2025`
- `/kaggle/input/santa25-public`
- Many other notebooks and datasets

**Action**: Download ALL available external datasets and create comprehensive ensemble.

### 2. **[HIGH PRIORITY]** Generate Asymmetric Solutions
- Break symmetry constraints in tree placement
- Allow non-mirrored patterns
- Run exhaustive stochastic search with asymmetric configurations
- Focus on N values where symmetric solutions are suboptimal

### 3. **[MEDIUM PRIORITY]** Run Much Longer Optimization
- bbox3 with n=10000+, r=1000+ (hours, not minutes)
- SA with temperature scheduling over extended periods
- Focus on worst-performing N values (N=1 has score 0.661, N=2 has 0.451)

### 4. **[LOWER PRIORITY]** Manual Fine-tuning
- Use aikhmelnytskyy interactive editor for specific N values
- Focus on boundary-touching trees that determine bounding box

## What NOT to Try
- More local search on current baseline (SA, swaps, squeeze) - EXHAUSTED
- Grid-based approaches from scratch - Much worse than baseline
- Short optimization runs - Baseline was optimized for weeks

## Gap Analysis
- Need to reduce score by 1.758 points total
- Average improvement needed: 0.00879 per N value
- If we can find better configurations for even 50% of N values, we can reach target

## Validation Notes
- CV = LB perfectly for this optimization problem
- Use Shapely for ground-truth overlap detection
- Save with full precision (18+ decimal places)

## SUBMISSION STRATEGY
- **Remaining submissions**: 97
- **Submit after EVERY experiment** - LB feedback is free!
- We have abundant submissions - use them to calibrate and verify

## Key Files
- Current best: `/home/submission/submission.csv` (70.681004)
- Repaired baseline: `/home/code/experiments/003_preoptimized/repaired_baseline.csv`
- External datasets to explore: bucket-of-chump, telegram-public-shared-solution, santa25-public