# Santa 2025 - Christmas Tree Packing Optimization

## Current Status
- Best CV score: 70.647306 (exp_003, but failed LB validation due to precision)
- Best LB score: 70.658891 (exp_001/exp_002)
- Target: 68.919154 | Gap to target: 1.740 points (2.53%)
- Submissions used: 4/100 (88 remaining)

## CRITICAL ISSUE DISCOVERED
The exp_003 submission (70.647306) failed with "Overlapping trees in group 042".

**Root Cause Analysis:**
- The failed submission had 15 decimal places precision
- Successful submissions have 20+ decimal places precision
- Kaggle's validator is more sensitive to precision than our local validator
- The "overlap" is actually a precision/rounding issue, not a real overlap

**Solution Found:**
- Found the SAME 70.647306 score file with 20 decimal places precision
- Location: `/home/nonroot/snapshots/santa-2025/21165876936/code/submission.csv`
- This should pass Kaggle validation

**Even Better File Found (but risky):**
- Score: 70.646824 (0.0005 better!)
- Location: `/home/nonroot/snapshots/santa-2025/21165878844/code/experiments/002_valid_ensemble/submission.csv`
- BUT: Only 15 decimal places precision - might fail like the previous submission

## Response to Evaluator

The evaluator correctly identified that:
1. The better baseline (70.647306) was NOT submitted to LB yet - CORRECT, and it failed when we tried
2. sa_v1_parallel.cpp hasn't been used - VALID, but we need to fix the validation issue first
3. Time budget is underutilized - VALID, we have plenty of time

**Key disagreement:** The evaluator assumed the 70.647306 file was valid. It wasn't - it had precision issues that caused Kaggle to reject it. We've now found a high-precision version of the same file.

## Recommended Approaches (Priority Order)

### 1. **IMMEDIATE: Submit the High-Precision 70.647306 File**
- File: `/home/nonroot/snapshots/santa-2025/21165876936/code/submission.csv`
- Score: 70.647306
- Precision: 20 decimal places
- This should pass validation and establish our new best LB score

### 2. **NEXT: Try the 70.646824 File (Risky)**
- File: `/home/nonroot/snapshots/santa-2025/21165878844/code/experiments/002_valid_ensemble/submission.csv`
- Score: 70.646824 (0.0005 better!)
- Precision: 15 decimal places
- Risk: Might fail like the previous submission
- Mitigation: Could try to increase precision by re-writing with more decimal places

### 3. **THEN: Run Sophisticated Optimizers**
Once we have a valid baseline on LB, run:
- sa_v1_parallel.cpp from jonathanchan kernel
- Focus on N values 21-100 which contribute most to score
- Run for multiple generations with perturbation

### 4. **INVESTIGATE: Precision Requirements**
- What precision does Kaggle actually require?
- Can we convert low-precision files to high-precision?
- The 70.646824 file might be salvageable if we can increase its precision

## What NOT to Try
- Submitting files with <20 decimal places precision
- Running optimizers that output low-precision results
- Assuming local validation catches all issues

## Validation Notes
- CV-LB gap is 0.0000 when validation passes
- Local score calculation is accurate
- BUT: Kaggle's overlap detection is more sensitive to precision
- Always check precision (20+ decimal places) before submitting

## Key Files Discovered
| Score | Precision | Path | Status |
|-------|-----------|------|--------|
| 70.646824 | 15 | 21165878844/.../002_valid_ensemble/submission.csv | RISKY |
| 70.647306 | 20 | 21165876936/code/submission.csv | SAFE |
| 70.647306 | 15 | 21165874980/.../candidate_001.csv | FAILED |
| 70.658891 | 20 | 21164519357/.../santa-2025.csv | PASSED LB |

## Submission Strategy
- Remaining submissions: 88
- Submit the high-precision 70.647306 file FIRST
- If it passes, we've improved from 70.658891 to 70.647306 (0.0116 improvement)
- Then try the 70.646824 file (risky but potentially 0.0005 better)
- Then focus on optimization strategies
