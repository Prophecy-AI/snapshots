# Santa 2025 Christmas Tree Packing - Seed Prompt (Loop 6)

## Current Status
- Best CV score: 70.734327 (from ALL 6 experiments - no improvement)
- Best LB score: 70.734327 (from exp_001)
- Target: 68.931058 | Gap to target: 1.803269 (~2.5%)
- Submissions remaining: 95/100

## CRITICAL: 6 EXPERIMENTS, ZERO IMPROVEMENT - PIVOT REQUIRED!

All 6 experiments achieved the EXACT SAME score (70.734327). This is a clear signal that:
1. The baseline is at a strong local optimum for standard SA approaches
2. Standard SA with higher parameters will NOT escape this optimum
3. We need a FUNDAMENTALLY DIFFERENT approach

## Response to Evaluator

**AGREE with evaluator's key points:**
1. Parameters used (20,000 iterations, 10 restarts) were too low - but even with higher params, the v3 optimizer showed 0% improvement
2. The egortrushin/jiweiliu SA-with-translations approach is fundamentally different and should be tried
3. The deletion cascade technique can propagate improvements from large N to smaller N

**Key insight from analysis:**
- Large N values (51-200) contribute 73% of the total score (51.69 out of 70.73)
- The jiweiliu kernel claims ~0.15 improvement in under 2 minutes using SA-with-translations
- This approach creates STRUCTURED packings using 2 base trees translated in a grid pattern

## Recommended Approach: SA-with-Translations + Deletion Cascade

### What is SA-with-Translations?
Instead of optimizing each tree independently, this approach:
1. Creates 2 base trees at different angles (e.g., 0° and 180°)
2. Translates them in a grid pattern (nx × ny) to create N trees
3. Uses SA to optimize:
   - Translation distances (delta_x, delta_y)
   - Base tree angles
   - Grid dimensions
4. Applies deletion cascade: for each N from 200 down to 2, try removing each tree and keep the best

### Why this might work:
1. Creates STRUCTURED packings that may be more efficient for large N
2. Explores a different solution space than standard SA
3. The deletion cascade propagates improvements to smaller N
4. The jiweiliu kernel shows this can improve scores

### Implementation Plan:
1. **Extract and adapt the jiweiliu kernel code** (available at `/home/code/research/kernels/jiweiliu_super-fast-simulated-annealing-with-translations/`)
2. **Key components to implement:**
   - Grid configuration generator (all viable nx × ny combinations)
   - SA optimizer for translation distances and angles
   - Deletion cascade for propagating improvements
3. **Parameters from jiweiliu kernel:**
   - Tmax: 0.001, Tmin: 0.000001
   - nsteps: 10, nsteps_per_T: 10000
   - position_delta: 0.002, angle_delta: 1.0

## What NOT to Try
- ❌ Standard SA with higher parameters (already tried, no improvement)
- ❌ More iterations on the same approach (6 experiments, 0 improvement)
- ❌ Simple grid packing (already tried in exp_004, much worse than baseline)
- ❌ Overlap repair (overlapping configs are fundamentally broken)

## Validation Notes
- Score is deterministic (no CV needed)
- Validate for overlaps before submission
- Use the same scoring function as baseline

## SUBMISSION STRATEGY
- Remaining submissions: 95
- Submit after this experiment? YES - we have abundant submissions
- LB feedback is valuable to confirm if the new approach works

## Files to Reference
- jiweiliu kernel: `/home/code/research/kernels/jiweiliu_super-fast-simulated-annealing-with-translations/super-fast-simulated-annealing-with-translations.ipynb`
- egortrushin kernel: `/home/code/research/kernels/egortrushin_santa25-simulated-annealing-with-translations/santa25-simulated-annealing-with-translations.ipynb`
- Baseline: `/home/nonroot/snapshots/santa-2025/21105319338/code/datasets/santa-2025-csv/santa-2025.csv`

## Expected Outcome
If the jiweiliu approach works as claimed (~0.15 improvement), we should see:
- Score improvement from 70.734327 to ~70.58 or better
- This would still leave ~1.65 gap to target, requiring further optimization
- But it would prove the approach works and can be iterated on
