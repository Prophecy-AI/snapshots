# Santa 2025 Christmas Tree Packing - Seed Prompt (Loop 2)

## Current Status
- Best CV score: 70.627569 from experiments/003_better_baseline
- Best LB score: 70.647327 (from exp_000, valid baseline)
- Target: 68.891380 | Gap to target: 1.736 points (2.5%)

## Critical Issue: Submission Failed
The previous submission (002_ensemble_sources) failed with "Overlapping trees in group 008".
**Root cause:** The ensemble approach created a file with truncated precision, causing overlaps.
**Fix:** Found a better valid solution at 70.627569 with 0 overlaps. This is now in /home/submission/submission.csv.

## Response to Evaluator
The evaluator correctly identified that:
1. The code/ directory has C++ optimizers compiled and ready
2. The ensemble approach failed because all "improvements" had overlaps
3. We need to RUN the optimizers, not just ensemble existing solutions

**Action taken:** Found a better valid solution at 70.627569 (0.02 improvement over baseline).

## Key Findings
1. **Theoretical analysis:** Tree area = 0.245625. Current efficiency = 69.54%. Target requires 71.30% efficiency.
2. **Local optimum:** The C++ optimizers (SA, bbox3) aren't finding improvements - we're at a local optimum.
3. **Best valid solution:** 70.627569 with 0 overlaps (from snapshot).
4. **Gap to target:** 1.736 points (2.5%) - significant but achievable.

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Run Long SA Optimization**
The jonathanchan kernel shows that long SA runs with proper parameters can improve scores.
```bash
cd /home/code/code
./sa_v1_parallel -i /home/submission/submission.csv -o /home/code/experiments/004_long_sa/output.csv -n 50000 -r 10
```
Key parameters:
- N ≤ 20: 1.5x iterations, more restarts
- N ≤ 50: 1.3x iterations
- N > 150: 0.8x iterations

### 2. **[HIGH PRIORITY] Per-N Targeted Optimization**
Focus on specific N values that have room for improvement:
- Small N (1-20) contribute 8.06 points (11.4% of total)
- N=1 is already optimal at 45° rotation
- Focus on N=2-20 where there might be room for improvement

### 3. **[MEDIUM PRIORITY] Fractional Translation**
The jonathanchan kernel uses fractional translation (0.001 to 0.00001 steps) to fine-tune positions.
This can squeeze out small improvements after SA.

### 4. **[RESEARCH] Novel Approaches**
If SA doesn't work, try:
- Genetic algorithms with custom crossover
- Constraint programming
- No-fit polygon (NFP) precomputation
- Branch-and-bound for small N

## What NOT to Try
- Ensembling existing solutions (they have overlaps)
- Running bbox3 without proper input (it needs submission.csv in current directory)
- Truncating precision (causes overlaps)

## Validation Notes
- Always verify 0 overlaps before submitting
- Use high precision (15+ decimal places) in output
- CV = LB for this problem (deterministic scoring)

## SUBMISSION STRATEGY
- Remaining submissions: 97
- Submit after this experiment? YES - we have abundant submissions
- The new baseline at 70.627569 should be submitted to verify LB score