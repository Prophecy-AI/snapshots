# Santa 2025 - Evolved Seed Prompt (Loop 1)

## Current Status
- Best CV score: 70.647327 from exp_000 (001_baseline)
- Best LB score: 70.647327 (perfect CV-LB alignment!)
- Target: 68.894234 | Gap to target: 1.753 points (2.48%)

## CRITICAL INSIGHT
**The target (68.894234) is BELOW the current #1 on the public leaderboard (68.894566)!**
This means we need to achieve something that hasn't been done publicly yet.

## CV-LB Relationship Analysis
- CV-LB gap: 0.0000 (PERFECT alignment)
- This is expected for a deterministic optimization problem
- CV improvements will directly translate to LB improvements

## Response to Evaluator
The evaluator correctly identified that:
1. No optimization code has been written yet - we're using pre-optimized snapshots
2. Small N optimization is highest leverage (N=1-20 contribute 11.4% of total score)
3. bbox3.cpp and other C++ optimizers are available but not yet implemented

**My response:** The evaluator is right that we need to move from research to implementation. However, given that the target is BELOW the current #1 on the leaderboard, we need to be strategic. Simply running existing optimizers won't be enough - we need novel approaches.

## Key Findings from Analysis
1. **Score breakdown:**
   - N=1-10: 4.33 points (6.1% of total)
   - N=1-20: 8.06 points (11.4% of total)
   - N=1-50: 19.04 points (27.0% of total)
   - N=1-100: 36.67 points (51.9% of total)

2. **Top improvement opportunities (worst N values):**
   - N=1: 0.661 (already optimal at 45°)
   - N=2: 0.451
   - N=3: 0.435
   - N=4-5: 0.417
   - N=6-7: 0.400
   - N=8-9: 0.386

3. **Required improvement:** 2.48% across all N values

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Ensemble Best Solutions from Multiple Sources**
The jonathanchan kernel shows that ensembling best solutions per N from multiple sources is key:
- Collect CSVs from: bucket-of-chump, santa-2025-try3, telegram-public-shared, etc.
- For each N, keep the solution with the smallest bounding box
- This alone can give significant improvements

**Implementation:**
```python
# Ensemble approach - take best solution per N from multiple sources
for n in range(1, 201):
    best_score = float('inf')
    best_solution = None
    for source in sources:
        score = calculate_score(source, n)
        if score < best_score:
            best_score = score
            best_solution = source[n]
```

### 2. **[HIGH PRIORITY] Run C++ Optimizer on Baseline**
The bbox3.cpp optimizer from jazivxt/why-not kernel uses:
- Simulated annealing with complex number vectors
- Fluid dynamics simulation
- Hinge pivot moves
- Density gradient flow
- Global boundary tension

**Implementation:**
1. Extract bbox3.cpp from research/kernels/jazivxt_why-not/
2. Compile: `g++ -O3 -fopenmp bbox3.cpp -o bbox3`
3. Run with different parameters for different N ranges:
   - N<=20: more restarts, 1.5x iterations
   - N<=50: 1.3x iterations
   - N>150: 0.8x iterations

### 3. **[MEDIUM PRIORITY] Fractional Translation Optimization**
The jonathanchan kernel shows fractional translation can squeeze out extra improvements:
```cpp
double frac_steps[] = {0.001, 0.0005, 0.0002, 0.0001, 0.00005, 0.00002, 0.00001};
// Try moving each tree by tiny amounts in 8 directions
```

### 4. **[RESEARCH] Novel Approaches for Small N**
Since N=1-20 contribute 11.4% of total score, focus research here:
- Branch-and-bound for exact solutions (N=2-5)
- Exhaustive rotation search (try all angle combinations)
- Tessellation patterns for specific N values

## What NOT to Try
- Running the same optimizer with slightly different parameters (local optimum trap)
- Focusing on large N (100-200) - they contribute less per-N
- Building from scratch when pre-optimized solutions exist

## Validation Notes
- CV scheme: Calculate sum(side²/n) for n=1 to 200
- Overlap check: Use Shapely with tolerance 1e-9
- Submission format: Values prefixed with 's', e.g., "s0.123456"

## SUBMISSION STRATEGY
- Remaining submissions: 97
- **Submit after EVERY experiment** - we have abundant submissions
- LB feedback is free information - USE IT

## Next Experiment: 002_ensemble_sources
1. Collect all available pre-optimized CSVs from snapshots and kernels
2. Ensemble best solution per N
3. Validate no overlaps
4. Submit to get LB feedback
