# Seed Prompt: Santa 2025 Tree Packing

## Problem Definition
- **Goal:** Pack $n$ identical irregular polygons ("Christmas Trees") into the smallest square box.
- **Instances:** $n = 1$ to $200$.
- **Metric:** Minimize $\sum_{n=1}^{200} \frac{s_n^2}{n}$, where $s_n$ is the side length of the bounding square for $n$ trees.
- **Constraints:** No overlap. Trees can be rotated.
- **Tree Shape:** Defined polygon (height 1.0, width 0.7).
- **Precision:** High precision required (Decimal).

## Current Best Approach (Baseline)
- **Greedy Constructive:** Start with $n-1$ solution, add $n$-th tree at a random angle, move to center until collision.
- **Weakness:** Does not adjust previous trees. Likely gets stuck in local optima.

## Recommended Techniques
### 1. Optimization Algorithms
- **Simulated Annealing (SA):** Perturb tree positions/rotations and accept worse solutions with probability to escape local optima.
- **Genetic Algorithms (GA):** Evolve populations of packings.
- **Guided Local Search:** Penalize overlaps dynamically.
- **Physics-based Simulation:** Treat trees as rigid bodies with attraction to center and repulsion on overlap (e.g., Box2D or custom physics).
- **CMA-ES:** For optimizing the coordinates and angles of a fixed number of trees (might be hard for large $n$ due to dimensionality).

### 2. Improvement Strategies
- **Solve Independent Instances:** Do NOT just append to $n-1$. Solve each $n$ from scratch or use $n-1$ as a *seed* but allow full rearrangement.
- **Continuous Optimization:** Use differentiable collision detection (e.g., smooth approximations) to use gradient descent (e.g., PyTorch/JAX).
- **Hybrid Approach:** Constructive heuristic to get initial solution -> SA/GA to refine.

### 3. Libraries
- **Shapely:** For geometry and exact collision detection.
- **PyTorch/JAX:** For gradient-based optimization (if applicable).
- **Box2D / Pymunk:** For physics simulation.

## Experiments to Run
1. **Baseline Replication:** Run the greedy kernel to get a baseline score.
2. **Simulated Annealing:** Implement SA to perturb a configuration (move/rotate trees) to minimize bounding box.
3. **Physics Simulation:** "Shake" the container to settle trees more compactly.
