# Santa 2025 - Christmas Tree Packing Challenge Seed Prompt

## Current Status
- Best CV score: 70.659958 from exp_002 (003_clean_ensemble)
- Best LB score: 70.659958 (verified, matches CV exactly)
- Target: 68.919154 | Gap to target: 1.74 points (2.5%)
- Submissions used: 3/100 (97 remaining)

## Critical Situation Analysis

### What We've Tried (All Failed to Improve)
1. **Ensemble from 40 snapshots** → Best clean score: 70.659958
2. **SA from random starts** → 10-100% worse than baseline
3. **C++ optimizer with fractional translation** → No improvement (at local optimum)
4. **Grid-based construction** → No improvement
5. **Fixing overlapping configurations** → Overlaps too large to fix
6. **External datasets** (Telegram, saspav, jonathanchan, seowoohyeon) → All worse or equal to current

### Why We're Stuck
The pre-optimized solutions are at **tight local optima**. All available public sources converge to ~70.66. The top kernels achieve better scores (68.5-69.5) by:
1. Ensembling from 15+ sources (many not publicly available)
2. Running on TPU/96-core machines for hours
3. Using proprietary datasets shared via Telegram/Discord

### The Gap Analysis
- Current: 70.659958
- Target: 68.919154
- Gap: 1.74 points (2.5%)
- This gap CANNOT be closed by optimization alone - need fundamentally better starting solutions

## Response to Evaluator

The evaluator correctly identified that:
1. SA from random starts cannot compete with pre-optimized solutions ✓
2. The public sources downloaded don't add value - they're all worse than existing snapshots ✓
3. The C++ optimizer with fractional translation hasn't improved the solution ✓

However, I disagree with the suggestion to "run the jonathanchan kernel on Kaggle" because:
- We don't have Kaggle execution access
- The kernel's power comes from 15+ input sources we don't have access to
- Even if we could run it, the output would be similar to what we already have

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Try Fundamentally Different Construction Algorithms**

The key insight from the discussions is that **symmetric solutions may be optimal for certain N values**. The zaburo kernel shows that grid-based construction can achieve 88.33 score as a starting point.

**Approach: Implement lattice-based construction with optimization**
```python
def lattice_construction(n, lattice_type='hexagonal'):
    """Build configuration using regular lattice pattern"""
    # Try hexagonal, square, triangular lattices
    # Optimize lattice parameters (spacing, rotation, offset)
    # Apply local search to refine
```

### 2. **[HIGH PRIORITY] Analyze Optimal Configurations for Small N**

The discussions mention that N=1 optimal is (0, 0, 45°) with score 0.661250. We should:
1. Verify our N=1 configuration is optimal
2. Manually analyze N=2, N=3, N=4 configurations
3. Look for patterns that can be generalized

### 3. **[MEDIUM PRIORITY] Implement Backward Propagation**

The egortrushin kernel shows that removing trees from larger configurations can improve smaller ones:
```python
# For N from 200 down to 2:
#   For each tree in config[N]:
#     Remove tree, check if config[N-1] improves
```

### 4. **[MEDIUM PRIORITY] Try Different Angle Patterns**

Current solutions use 68° and 248° predominantly. Try:
- Pure 0°/180° alternating
- 45°/225° alternating
- Hexagonal angles (0°, 60°, 120°, 180°, 240°, 300°)

### 5. **[LOW PRIORITY] Genetic Algorithm with Crossover**

Instead of SA, try GA with:
- Crossover between different configurations
- Mutation of positions and angles
- Selection based on score

## What NOT to Try
- More SA iterations on current solution (already at local optimum)
- Downloading more public datasets (all are worse)
- Fixing overlapping configurations (overlaps too large)
- Running C++ optimizer again (no improvement possible)

## Validation Notes
- CV scheme: Direct scoring (sum of side²/N for N=1 to 200)
- CV matches LB exactly (70.659958)
- No overlap checking needed for valid configurations

## SUBMISSION STRATEGY
- Remaining submissions: 97
- Submit after EVERY experiment that produces a valid submission
- LB feedback is free - USE IT!

## Key Insight from Discussions

The "Symmetric solutions that are apparently optimal" discussion (42 votes) suggests that for certain N values, symmetric arrangements may be provably optimal. This is a fundamentally different approach from SA optimization.

**The target IS achievable.** The path forward is:
1. Implement constructive algorithms that find different local optima
2. Focus on small N values where efficiency is lowest
3. Combine insights from symmetric solutions with optimization

## Next Experiment

Implement a **lattice-based construction** approach that:
1. Generates configurations from scratch using regular patterns
2. Tries multiple lattice types (hexagonal, square, triangular)
3. Optimizes lattice parameters (spacing, rotation, offset)
4. Applies local search to refine

This is fundamentally different from optimizing existing solutions and may find different local optima.
