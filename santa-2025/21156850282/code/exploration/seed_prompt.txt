# Santa 2025 - Evolved Seed Prompt (Loop 1)

## Current Status
- Best CV score: 70.572798 (from snapshot 21145966992 - BETTER than previous baseline!)
- Best LB score: N/A (no submissions yet)
- Target: 68.919154 | Gap to target: 1.65 points (2.3% improvement needed)

## Public Kernel Status (CRITICAL!)
- Have we implemented the best kernel yet? **NO** - we only loaded a snapshot
- Top kernels identified:
  1. jonathanchan/santa25-ensemble-sa-fractional-translation (175 votes) - **ENSEMBLE + SA + FRACTIONAL TRANSLATION**
  2. saspav/santa-submission (440 votes) - bbox3 optimizer
  3. jazivxt/why-not (298 votes) - fluid dynamics optimizer
  4. smartmanoj/santa-claude (373 votes) - tree_packer_v21 with swap moves
- Kernels we've implemented: NONE (only loaded snapshot)
- **PRIORITY**: Implement ensemble approach from jonathanchan kernel

## Key Findings from Analysis

### Per-N Score Distribution
- N=1-10: 4.33 (6.1% of total) - Small N has highest gap to theoretical
- N=11-50: 14.71 (20.8%)
- N=51-100: 17.63 (25.0%)
- N=101-150: 17.14 (24.3%)
- N=151-200: 16.85 (23.8%)

### Angle Patterns
- Most common angles: 68° (1872 trees), 248° (1871 trees)
- Trees use diagonal orientations, alternating up/down pattern
- This suggests optimal packing uses ~68° and ~248° (180° apart)

### Theoretical Bounds
- Tree area: 0.245625
- Theoretical minimum: 49.125 (if perfect packing)
- Current: 70.57 (44% above theoretical)
- Target: 68.92 (40% above theoretical)

## Response to Evaluator
The evaluator correctly identified:
1. **No code implementation yet** - Agreed. We need to implement algorithms, not just load snapshots.
2. **C++ optimizers not compiled** - Will address by implementing ensemble approach.
3. **Per-N analysis missing** - DONE in this loop. Found small N has highest improvement potential.

The evaluator's top priority (bottom-left beam search) is valid, but I'm pivoting to **ensemble approach first** because:
- The jonathanchan kernel shows ensemble from multiple sources is highly effective
- We have multiple snapshots with different scores that can be ensembled
- Ensemble is faster to implement and can provide immediate gains

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Implement Ensemble from Multiple Sources
The jonathanchan kernel shows collecting best N from multiple sources is effective:
```python
# For each N from 1 to 200:
#   - Score that N from each source
#   - Keep the best scoring configuration
```
Sources available:
- Snapshot 21145966992 (score 70.572798)
- Snapshot 21145965159 (score 70.659944)
- Snapshot 21156850282 (score 70.659944)
- Other snapshots with different configurations

### 2. **[HIGH PRIORITY]** Implement Fractional Translation Optimization
From jonathanchan kernel - key technique:
```cpp
double frac_steps[] = {0.001, 0.0005, 0.0002, 0.0001, 0.00005, 0.00002, 0.00001};
// For each tree, try moving by tiny amounts in 8 directions
// Keep if bounding box improves
```
This is a simple local search that can squeeze out small improvements.

### 3. **[MEDIUM PRIORITY]** Focus on Small N (1-20)
Analysis shows N=1-10 has highest gap to theoretical minimum.
- N=1: score 0.661, theoretical 0.246 (62% gap!)
- Small N configurations may have more room for improvement
- Try different angle combinations for small N

### 4. **[MEDIUM PRIORITY]** Compile and Run C++ Optimizers
- bbox3.cpp from jazivxt/why-not
- tree_packer_v21.cpp from smartmanoj/santa-claude
- sa_v1_parallel.cpp from jonathanchan kernel

## What NOT to Try
- Running SA on pre-optimized solutions (already at local optimum)
- Grid-based initialization (converges to worse optimum)
- Simple local search without fractional steps

## SUBMISSION STRATEGY
- Remaining submissions: 100
- **Submit after this experiment? YES** - We have abundant submissions, need LB feedback
- First submission should establish LB baseline

## Validation Notes
- Score verified locally using score_submission.py
- Check for overlaps before submission
- Format: id,x,y,deg with 's' prefix on values

## Experiment 2 Plan
1. Create ensemble from multiple snapshots (best N from each)
2. Apply fractional translation optimization
3. Score and submit to get LB feedback
