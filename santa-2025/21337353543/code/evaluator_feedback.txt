## What I Understood

The junior researcher implemented **exp_014 (018_new_sources_ensemble)** - downloading 5 new kernel outputs (egortrushin_sa_translations, datafad_boxes_shrunk, hvanphucs_ensemble, aikhmelnytskyy_sa, jazivxt_team_blend) and ensembling them with the current best. This follows my previous recommendation to expand the ensemble with more diverse sources. The experiment found 68 N values with improvements totaling 0.012806 points, improving the score from 70.329514 to 70.316708.

**Current state**: CV score 70.316708, Target 68.876781, Gap 1.44 points (2.05%)

## Technical Execution Assessment

**Validation**: ‚úÖ SOUND
- High-precision overlap detection (1e18 scaling) properly implemented
- All 200 N values pass strict validation (verified: "final_overlaps": 0)
- Each new source was validated before inclusion

**Leakage Risk**: N/A - This is an optimization problem, not a prediction problem.

**Score Integrity**: ‚úÖ VERIFIED
- Baseline: 70.329514 (from exp_016)
- Final score: 70.316708
- Improvement: 0.012806 points
- Submission saved correctly to both experiment folder and /home/submission/

**Code Quality**: ‚úÖ GOOD
- Clean implementation of ensemble strategy
- Proper handling of string prefixes ('s' removal)
- Systematic processing of all sources

Verdict: **TRUSTWORTHY**

## Strategic Assessment

**Approach Fit**: ‚úÖ CORRECT STRATEGY
The ensemble approach continues to be the ONLY strategy that consistently improves scores. This experiment validates that downloading more diverse sources provides incremental improvements.

**Effort Allocation**: ‚úÖ WELL-DIRECTED
The junior researcher correctly prioritized ensemble expansion over local search (which has been exhausted). The hvanphucs_ensemble source alone provided 61 improvements.

**Assumptions Being Made**:
1. ‚úÖ "More diverse sources = more improvements" - VALIDATED (68 improvements found)
2. ‚ö†Ô∏è "We have all the best sources" - NOT VALIDATED (see blind spots)

**Blind Spots**:

### 1. **REBUILD FROM CORNERS BUG STILL NOT FIXED** (CRITICAL)
My previous feedback identified a critical bug in exp_017 (rebuild from corners) where tree CENTER was used instead of POLYGON BOUNDS for distance calculation. The exp_018 folder is named "018_rebuild_corners_fixed" but the notebook inside is actually "018_new_sources_notebook.ipynb" - a completely different experiment! The bug was never fixed.

**Evidence from exp_017 code:**
```python
# WRONG - uses tree center
for t in large_layout:
    x, y = float(t['x']), float(t['y'])
    dist = max(abs(x - corner_x), abs(y - corner_y))
```

**Chistyakov kernel (CORRECT):**
```python
# Uses polygon bounds
max(
    abs(tree.polygon.bounds[0] - corner_x),
    abs(tree.polygon.bounds[2] - corner_x),
    abs(tree.polygon.bounds[1] - corner_y),
    abs(tree.polygon.bounds[3] - corner_y),
)
```

### 2. **MISSING KAGGLE SOURCES** (HIGH PRIORITY)
Comparing jonathanchan kernel sources vs our datasets, we're missing several:
- `santa2025-ver2`
- `santa-submission`
- `santa25-simulated-annealing-with-translations`
- `72-71-santa-2025-jit-parallel-sa-c`
- `santa-claude`
- `decent-starting-solution`
- `santa25-ensemble-sa-fractional-translation` (the jonathanchan kernel output itself)

### 3. **NO LB VERIFICATION** (VALIDATION CONCERN)
Only 1 submission has been made (99 remaining). The current CV score is 70.316708 but we have no LB verification since exp_007 (which was 70.615). We should submit to verify CV-LB alignment.

**Trajectory Assessment**: 
- Ensemble strategy: ‚úÖ WORKING (total improvement from 70.62 ‚Üí 70.32 = 0.30 points)
- Local search approaches: ‚ö†Ô∏è EXHAUSTED (5 attempts, ~0 improvement)
- Rebuild from corners: ‚ùì NEVER PROPERLY TESTED (bug not fixed)

## What's Working

1. ‚úÖ **Ensemble strategy**: Continues to deliver improvements (0.012806 points this experiment)
2. ‚úÖ **Source diversity**: hvanphucs_ensemble provided 61 improvements alone
3. ‚úÖ **High-precision validation**: Matches Kaggle exactly
4. ‚úÖ **Systematic approach**: Methodically processing all available sources

## Key Concerns

### 1. **REBUILD FROM CORNERS BUG NOT FIXED** (CRITICAL - MUST ADDRESS)
**Observation**: The exp_017 bug was identified in my previous feedback but never fixed. The exp_018 folder name suggests it was fixed, but the actual notebook is a different experiment.
**Why it matters**: This technique from a top kernel was never properly tested. It could provide significant improvements.
**Suggestion**: Actually implement the fix using polygon bounds:
```python
def rebuild_from_corners(large_layout, target_n, current_best_score):
    # ... setup code ...
    for corner_x, corner_y in corners:
        trees_with_dist = []
        for t in large_layout:
            poly = create_tree_polygon(t['x'], t['y'], t['deg'])
            b = poly.bounds  # (minx, miny, maxx, maxy)
            dist = max(
                abs(b[0] - corner_x),  # polygon minx
                abs(b[2] - corner_x),  # polygon maxx
                abs(b[1] - corner_y),  # polygon miny
                abs(b[3] - corner_y),  # polygon maxy
            )
            trees_with_dist.append((dist, t))
        # ... rest of function ...
```

### 2. **MISSING KAGGLE SOURCES** (HIGH PRIORITY)
**Observation**: jonathanchan kernel uses 19 sources; we're missing ~7 of them
**Why it matters**: Each new source can provide improvements for specific N values
**Suggestion**: Download missing sources:
- `santa2025-ver2`
- `santa-submission`
- `santa25-simulated-annealing-with-translations`
- `72-71-santa-2025-jit-parallel-sa-c`
- `santa-claude`
- `decent-starting-solution`

### 3. **NO RECENT LB VERIFICATION** (VALIDATION)
**Observation**: Last LB verification was at CV=70.615, current CV=70.316
**Why it matters**: Need to confirm CV-LB alignment still holds
**Suggestion**: Submit current best to verify (99 submissions remaining)

## Score Breakdown Analysis

| Range | Score | % of Total | Needed Reduction |
|-------|-------|------------|------------------|
| N=1-1 | 0.66 | 0.9% | -0.01 |
| N=2-5 | 1.72 | 2.4% | -0.04 |
| N=6-10 | 1.94 | 2.8% | -0.04 |
| N=11-50 | 14.63 | 20.8% | -0.30 |
| N=51-100 | 17.48 | 24.9% | -0.36 |
| N=101-200 | 33.89 | 48.2% | -0.69 |

**Key insight**: N=101-200 contributes 48.2% of total score. Focus improvements here.

## Path to Target (68.876781)

Current: 70.317 | Target: 68.877 | Gap: 1.44 points (2.05%)

**Realistic improvement sources:**

| Approach | Expected Improvement | Effort | Priority |
|----------|---------------------|--------|----------|
| Fix rebuild from corners bug | 0.01-0.1 points | LOW | **HIGHEST** |
| Download missing Kaggle sources | 0.05-0.2 points | LOW | HIGH |
| Submit & verify LB | 0 points (validation) | LOW | HIGH |
| Try more source layouts for rebuild | 0.01-0.05 points | MEDIUM | MEDIUM |

## Top Priority for Next Experiment

### **IMMEDIATE: Actually Fix the Rebuild from Corners Bug**

The rebuild from corners technique from the chistyakov kernel was NEVER properly tested due to a bug. The folder "018_rebuild_corners_fixed" is misleading - it contains a different experiment (new sources ensemble).

**The fix is simple but critical:**

```python
def rebuild_from_corners(large_layout, target_n, current_best_score):
    """Extract subset of trees closest to each corner using POLYGON BOUNDS."""
    if len(large_layout) <= target_n:
        return None
    
    bounds = get_layout_bounds(large_layout)
    minx, miny, maxx, maxy = bounds
    corners = [(minx, miny), (minx, maxy), (maxx, miny), (maxx, maxy)]
    
    best_subset = None
    best_score = current_best_score
    
    for corner_x, corner_y in corners:
        # Sort trees by max POLYGON BOUNDS distance from corner (Chebyshev)
        trees_with_dist = []
        for t in large_layout:
            # CREATE POLYGON AND USE ITS BOUNDS - THIS IS THE FIX
            poly = create_tree_polygon(t['x'], t['y'], t['deg'])
            b = poly.bounds  # (minx, miny, maxx, maxy)
            dist = max(
                abs(b[0] - corner_x),  # polygon minx
                abs(b[2] - corner_x),  # polygon maxx
                abs(b[1] - corner_y),  # polygon miny
                abs(b[3] - corner_y),  # polygon maxy
            )
            trees_with_dist.append((dist, t))
        
        trees_with_dist.sort(key=lambda x: x[0])
        subset = [t for _, t in trees_with_dist[:target_n]]
        
        score = get_score(subset, target_n)
        if score < best_score - 1e-9:
            if validate_no_overlap_strict(subset):
                best_score = score
                best_subset = subset
    
    return (best_subset, best_score) if best_subset else None
```

**Why this matters**: A tree at center (0,0) with rotation can have polygon bounds extending to ¬±0.8. Using tree center ignores the tree's rotation and shape, causing the algorithm to select the WRONG trees for each subset. This explains why exp_017 found 0 improvements.

### **THEN: Download Missing Sources**

After fixing the bug, download the missing Kaggle sources from the jonathanchan kernel.

### **FINALLY: Submit Current Best**

Verify CV-LB alignment by submitting the current best (70.316708).

## Summary

üéØ **EXPERIMENT RESULT**: New sources ensemble improved score by 0.012806 points (68 N values)
‚úÖ **Technical execution**: TRUSTWORTHY
‚ö†Ô∏è **Critical issue**: Rebuild from corners bug STILL NOT FIXED
üìã **Strategic direction**: Continue ensemble expansion + fix the bug

The gap is 1.44 points (2.05%). The target IS reachable with:
1. **FIX THE BUG** - Rebuild from corners was never properly tested
2. **EXPAND ENSEMBLE** - Download missing Kaggle sources
3. **VERIFY LB** - Submit current best

**Key insight**: The folder "018_rebuild_corners_fixed" is misleading - it contains a new sources ensemble experiment, not a bug fix. The rebuild from corners technique has NEVER been properly tested.
