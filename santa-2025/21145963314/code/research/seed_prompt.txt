## Current Status
- Best CV score: 70.659958 from exp_005 (saspav_latest baseline)
- Best LB score: 70.659958 (CV = LB confirmed)
- Target: 68.919154 | Gap to target: 1.74 points (2.53%)

## Public Kernel Status (CRITICAL!)
- Have we implemented the best kernel yet? **NO - jiweiliu kernel NOT correctly implemented**
- Top kernels identified:
  1. jiweiliu/super-fast-simulated-annealing-with-translations (shows ~0.15 improvement)
  2. chistyakov/new-simple-fix-rebuild-large-layout-from-corners (corner rebuild approach)
  3. egortrushin/santa25-simulated-annealing-with-translations (lattice approach)
- Kernels we've implemented: NONE correctly (lattice SA failed due to wrong seeds)
- Kernels still to implement: jiweiliu (with correct seeds), chistyakov corner rebuild
- **CRITICAL**: Previous lattice attempt used WRONG initial seeds!

## CV-LB Relationship Analysis
- CV = LB exactly (no gap) - this is an optimization problem, not ML
- All submissions: CV matches LB perfectly
- No distribution shift - the problem is purely computational

## Response to Evaluator
The evaluator correctly identified that the lattice SA approach failed because:
1. We used simple seeds (0,0,0) and (0.5,0.5,180) instead of pre-optimized seeds
2. The jiweiliu kernel uses PRE-OPTIMIZED seeds that are the result of extensive optimization
3. We need to use the EXACT seeds from the jiweiliu kernel

**I agree with the evaluator's assessment.** The next experiment MUST use the correct pre-optimized seeds from the jiweiliu kernel:
- Seed 1: (-4.191683864412409, -4.498489528496051, 74.54421568660419)
- Seed 2: (-4.92202045352307, -4.727639556649786, 254.5401905706735)
- a_init = 0.8744896974945239
- b_init = 0.7499641699190263

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Implement jiweiliu kernel with CORRECT pre-optimized seeds

The jiweiliu kernel shows ~0.15 improvement in 2 minutes. We MUST implement it correctly:

**Pre-optimized seeds (CRITICAL - use these EXACTLY):**
```python
initial_seeds = [
    (-4.191683864412409, -4.498489528496051, 74.54421568660419),
    (-4.92202045352307, -4.727639556649786, 254.5401905706735),
]
a_init = 0.8744896974945239
b_init = 0.7499641699190263
```

**Key components to implement:**
1. Use the pre-optimized seeds above (NOT simple seeds)
2. Generate many grid configurations automatically:
   ```python
   for ncols in range(2, 11):
       for nrows in range(ncols, 15):
           for append_x in [False, True]:
               for append_y in [False, True]:
                   n_trees = 2 * ncols * nrows + (nrows if append_x else 0) + (ncols if append_y else 0)
                   if n_trees <= 200:
                       grid_configs.append((ncols, nrows, append_x, append_y))
   ```
3. Run SA optimization on each grid configuration
4. Apply deletion cascade to propagate improvements from large N to small N
5. Only keep configurations that are BETTER than baseline

**SA parameters (from jiweiliu kernel):**
```python
sa_params = {
    "Tmax": 0.001,
    "Tmin": 0.000001,
    "nsteps": 10,
    "nsteps_per_T": 5000,
    "position_delta": 0.002,
    "angle_delta": 1.0,
    "angle_delta2": 0.5,
    "delta_t": 0.002,
}
```

**Expected improvement: ~0.15 points (8.6% of gap)**

### 2. **[HIGH PRIORITY]** Corner rebuild approach (chistyakov kernel)

After implementing jiweiliu, try the corner rebuild approach:
- Take large N layouts (e.g., N=111, N=200)
- Extract subsets from each corner
- Check if the subset is better than the current configuration for that N
- This may find improvements for smaller N values

### 3. **[MEDIUM PRIORITY]** Longer optimization runs

If the above approaches don't close the gap:
- Run SA optimization for hours instead of minutes
- Try different random seeds
- May find different basins

## What NOT to Try
- Simple initial seeds (0,0,0) and (0.5,0.5,180) - these cause overlaps
- Standard SA optimization on the baseline - already at tight local optimum
- Perturbation approaches - even small perturbations cause collisions
- Backward propagation on baseline - already optimal

## SUBMISSION STRATEGY
- Remaining submissions: 91
- Submit after this experiment? **YES** - we have abundant submissions
- Submit every experiment that produces a valid submission file

## Validation Notes
- CV = LB exactly for this optimization problem
- No need for cross-validation - just compute the score directly
- Verify no overlaps before submission

## Technical Notes
- Use numba for speed (already implemented)
- Use multiprocessing for parallel SA (if time permits)
- The jiweiliu kernel code is in `/home/code/research/kernels/jiweiliu_super-fast-simulated-annealing-with-translations/`
- The baseline is in `/home/code/external_data/saspav_latest/santa-2025.csv`