## SEED PROMPT - LOOP 44

## Current Status
- Best CV score: 70.316492 (from exp_022 and subsequent experiments)
- Best LB score: 70.3165 (verified on Kaggle)
- Target: 68.861114 | Gap to target: 1.455 points (2.11%)
- Submissions used: 13/100 (87 remaining!)
- Consecutive experiments at same score: 24+

## ‚ö†Ô∏è CRITICAL SITUATION ASSESSMENT

The agent has been STUCK at 70.316492 for 24+ experiments. This is a LOCAL OPTIMUM that:
- Cannot be escaped by bbox3 (completes in 4 minutes, finds no improvements)
- Cannot be escaped by SA, GA, PSO, DE (all converge to same score)
- Cannot be escaped by ensemble of existing snapshots (all snapshots are at same optimum)

**THE CURRENT APPROACH IS FUNDAMENTALLY BROKEN.**

## Response to Evaluator

The evaluator correctly identified:
1. **ZERO submissions were being made** - This was CRITICAL. We now have 13 submissions.
2. **"Extended" runs weren't actually extended** - bbox3 has fixed iterations
3. **exp_007 had NaN values** - The "best" score of 70.265730 was invalid
4. **Algorithm shopping without proper execution** - 24+ approaches tried briefly

**I AGREE with the evaluator's assessment.** The current approach of running bbox3/SA variations is NOT working.

## What We've Learned (from 45 experiments)

| Approach | Result | Conclusion |
|----------|--------|------------|
| bbox3 optimizer | 70.316 | Converges to local optimum in 4 min |
| Simulated Annealing | 70.316 | Same local optimum |
| Genetic Algorithm | 70.316 | Same local optimum |
| PSO, DE | 70.316 | Same local optimum |
| Ensemble from snapshots | 70.316 | All snapshots at same optimum |
| Extended bbox3 (6h) | 70.316 | Fixed iterations, completes in 4 min |

**ALL OPTIMIZATION APPROACHES CONVERGE TO THE SAME LOCAL OPTIMUM.**

## ‚õî FORBIDDEN (WILL BE REJECTED)

- ‚ùå Running bbox3 again (it's been run 10+ times, always same result)
- ‚ùå Running SA/GA/PSO/DE again (all converge to same optimum)
- ‚ùå "Extended" runs with timeout (bbox3 has fixed iterations)
- ‚ùå Ensemble from existing snapshots (all at same optimum)
- ‚ùå Any approach that has been tried in the last 24 experiments

## ‚úÖ REQUIRED: FUNDAMENTALLY DIFFERENT APPROACH

The gap is 1.455 points (2.11%). This CANNOT be closed by:
- Running the same optimizer longer
- Trying different parameters
- Ensembling existing solutions

**The only way to close this gap is to find NOVEL SOLUTIONS that don't exist in any snapshot.**

## üéØ NEXT EXPERIMENT: IMPLEMENT NOVEL ALGORITHM

### Option 1: Gradient-Based Pressure Optimization (from Eazy Optimizer)

The "Eazy Optimizer" kernel uses a NOVEL approach:
```cpp
// Calculus: Square Potential Gradient
// Pushes polygons away from bounding box walls toward center
void apply_square_pressure(Cfg& cur, int i, double S, double scale) {
    // Boundary Log-barrier derivatives: d/dx [-ln(L-x) - ln(L+x)]
    double L = S / 2.0;
    auto get_grad = [&](double pos) {
        double d1 = L - pos;
        double d2 = L + pos;
        return (1.0 / d1) - (1.0 / d2);
    };
    // Move AGAINST the gradient to move toward center
    cur.x[i] -= gx * scale * 0.01;
    cur.y[i] -= gy * scale * 0.01;
}
```

**IMPLEMENT THIS IN PYTHON:**
```python
def apply_square_pressure(trees, i, S, scale):
    """Push tree i toward center using log-barrier gradient"""
    L = S / 2.0
    x_mid = (trees[i].bbox.x0 + trees[i].bbox.x1) / 2
    y_mid = (trees[i].bbox.y0 + trees[i].bbox.y1) / 2
    
    # Log-barrier gradient
    gx = 1/(L - x_mid) - 1/(L + x_mid)
    gy = 1/(L - y_mid) - 1/(L + y_mid)
    
    # Move against gradient
    trees[i].x -= gx * scale * 0.01
    trees[i].y -= gy * scale * 0.01
```

### Option 2: Elastic Pulsing (from Eazy Optimizer)

```python
def elastic_pulse(trees, iteration):
    """Periodic squeeze and relax to escape local optima"""
    if iteration % 40000 == 0:
        cx, cy = centroid(trees)
        # Alternating squeeze/relax factor
        f = 0.999999 if (iteration % 80000 == 0) else 1.0000001
        for tree in trees:
            tree.x = cx + (tree.x - cx) * f
            tree.y = cy + (tree.y - cy) * f
```

### Option 3: Asymmetric Solutions (from Discussion)

The discussion "Why winning solutions will be Asymmetric" suggests:
- Symmetric solutions are NOT optimal for this problem
- Asymmetric arrangements can achieve better packing density
- Top teams use asymmetric configurations

**IMPLEMENT:**
```python
def generate_asymmetric_solution(n):
    """Generate asymmetric initial configuration"""
    # Instead of regular grid, use irregular placement
    # with varying angles that break symmetry
    trees = []
    for i in range(n):
        # Asymmetric angle distribution
        angle = (i * 137.5) % 360  # Golden angle for asymmetry
        # Irregular spacing
        r = sqrt(i) * 0.3
        x = r * cos(radians(angle * 2.4))
        y = r * sin(radians(angle * 2.4))
        trees.append((x, y, angle))
    return trees
```

### Option 4: Per-N Specialization

Different N values may need different approaches:
- N=1-10: Exhaustive search (small enough to be optimal)
- N=11-50: Dense block approach with interlocking
- N=51-200: Asymmetric lattice with pressure optimization

**IMPLEMENT:**
```python
def optimize_per_n(n):
    if n <= 10:
        return exhaustive_search(n)
    elif n <= 50:
        return dense_block_approach(n)
    else:
        return asymmetric_lattice(n)
```

## üìã CONCRETE STEPS FOR NEXT EXPERIMENT

1. **Create new experiment folder**: `experiments/047_novel_pressure_optimization/`

2. **Implement gradient-based pressure optimization in Python**:
   - Copy the log-barrier gradient approach from Eazy Optimizer
   - Add elastic pulsing for escaping local optima
   - Test on N=10, N=20, N=50 first

3. **Test on small N first**:
   ```python
   for n in [10, 20, 50]:
       my_score = pressure_optimize(n)
       baseline_score = get_baseline_score(n)
       print(f"N={n}: mine={my_score:.6f} vs baseline={baseline_score:.6f}")
   ```

4. **If small N shows improvement, scale to all N**

5. **SUBMIT THE RESULT** - We have 87 submissions remaining!

## ‚ö†Ô∏è IMPORTANT: DO NOT FALL BACK TO BASELINE

If your approach doesn't improve, DO NOT just submit the baseline again.
Instead:
- Record what you learned with RecordFinding
- Try a DIFFERENT novel approach
- The goal is to find NEW solutions, not re-submit existing ones

## üéØ SUCCESS CRITERIA

- **SUCCESS**: Any N value improves by > 0.001 over baseline
- **PARTIAL SUCCESS**: Small N test shows promise (even if not full improvement)
- **FAILURE**: Same score as baseline (but we learned something)

**REMEMBER: The target IS reachable. Top teams achieved 68.89 through novel algorithms, not by running bbox3 longer.**
