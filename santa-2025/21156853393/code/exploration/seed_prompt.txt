## Current Status
- Best CV score: 70.676102 from exp_000 (ensemble.csv)
- Best LB score: FAILED (Overlapping trees in group 040 - precision issue)
- Target: 68.919154 | Gap to target: 1.757 points (2.5% improvement needed)

## CRITICAL BUG FIX NEEDED
The first submission failed due to **precision loss** when writing the CSV:
- Original ensemble.csv has 18+ decimal places (e.g., `s-1.689632103422090692`)
- Our rewritten submission had lower precision (e.g., `s-1.6896321034220907`)
- This precision loss caused Kaggle's overlap detection to fail

**FIX**: Copy original CSV files directly instead of rewriting them. Use `shutil.copy()` to preserve exact precision.

## Pre-optimized Submissions Available
- ensemble.csv: 70.676102 (BEST)
- submission_best.csv (sa_v1_parallel): 70.676102
- chistyakov/submission_best.csv: 70.926150
- bucket-of-chump/submission.csv: 70.676501

## Response to Evaluator
The evaluator correctly identified that:
1. No actual optimization was run - only evaluation of existing files
2. The bbox3 binary optimizer should be leveraged
3. Extended optimization runs are needed to escape local optima

I agree with these points. The next experiment should:
1. First, fix the precision issue by copying the original ensemble.csv directly
2. Then run the C++ optimizer (bbox3 or sa_v1_parallel) with extended parameters

## Key Insights from Research
1. **jonathanchan kernel** uses fractional_translation with micro-steps (0.001 to 0.00001) for fine-tuning
2. **Population-based optimization** keeps top 3 candidates and perturbs them
3. **Different iteration counts** for different N ranges (small N gets more iterations)
4. **Ensemble from 19+ sources** to get best per-N configurations

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Fix precision and submit baseline
- Copy ensemble.csv directly to /home/submission/submission.csv using shutil.copy()
- This should score ~70.68 on LB and establish a valid baseline

### 2. **[HIGH PRIORITY]** Run C++ optimizer with extended parameters
The bbox3 binary is available at: `/home/nonroot/snapshots/santa-2025/21116303805/code/preoptimized/bbox3`
```bash
./bbox3 -n 20000 -r 128  # Extended run
```
Or compile and run sa_v1_parallel.cpp from the jonathanchan kernel.

### 3. **[MEDIUM PRIORITY]** Focus on small N values (1-10)
These contribute 6.1% of total score but may have room for improvement:
- N=1 is already optimal at 45Â° rotation
- N=2-10 may benefit from exhaustive angle search

### 4. **[MEDIUM PRIORITY]** Implement fractional_translation
After SA optimization, apply micro-step translations (0.001 to 0.00001) in 8 directions to fine-tune positions.

## What NOT to Try
- Rewriting CSV files with pandas (causes precision loss)
- Short optimization runs (pre-optimized files are already at local optima)
- Simple ensemble without optimization (all sources converge to similar scores)

## Validation Notes
- Always copy original CSV files directly to preserve precision
- Verify row count is 20100
- Check for overlaps using Shapely with tolerance < 1e-12
- Kaggle's overlap detection is stricter than ours - be conservative

## SUBMISSION STRATEGY
- Remaining submissions: 99
- Submit after this experiment? YES - we need to establish a valid baseline first
- The precision fix should allow the 70.68 submission to score correctly
