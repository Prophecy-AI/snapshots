{
  "query": "How to use OR-Tools constraint programming for 2D polygon packing optimization?",
  "results": [
    {
      "title": "ANSWER",
      "text": "Based on the search results, using OR-Tools constraint programming for 2D polygon packing involves modeling the problem with constraints such as `AddNoOverlap2D`, which enforces non-overlapping conditions between polygons, and employing indicator constraints like `OnlyEnforceIf` to control when these constraints are active ([Result 1](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva), [Result 3](https://yetanothermathprogrammingconsultant.blogspot.com/2021/02/2d-bin-packing-with-google-or-tools-cp.html)). \n\nA typical approach is to assign each polygon to a bin or position, then use `AddNoOverlap2D` to ensure polygons do not overlap within the same bin. To conditionally enforce these constraints (e.g., only when polygons are in the same bin), you can use `OnlyEnforceIf` with boolean indicator variables that represent whether polygons share a bin ([Result 1](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva), [Result 3](https://yetanothermathprogrammingconsultant.blogspot.com/2021/02/2d-bin-packing-with-google-or-tools-cp.html)). \n\nHowever, some users have encountered issues with `OnlyEnforceIf` leading to invalid models, indicating that careful formulation is necessary. The OR-Tools GitHub examples and documentation provide further guidance on implementing such models, including the use of `AddNoOverlap2D` and indicator variables for polygon packing ([Result 4](https://developers.google.com/optimization/examples), [Result 6](https://developers.google.com/optimization/cp/cp_example)). \n\nIn summary, the key steps are:\n1. Define variables for polygon positions and bin assignments.\n2. Use `AddNoOverlap2D` to enforce non-overlap constraints.\n3. Use boolean indicator variables to specify when constraints should be active.\n4. Employ `OnlyEnforceIf` to conditionally enforce overlap constraints based on bin assignments ([Result 1](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva), [Result 3](https://yetanothermathprogrammingconsultant.blogspot.com/2021/02/2d-bin-packing-with-google-or-tools-cp.html)). \n\nFor detailed implementation examples, refer to the OR-Tools GitHub repository and official tutorials on constraint programming for packing problems.",
      "url": ""
    },
    {
      "title": "2d bin packing using or-tools: AddNoOverlap2D and OnlyEnforceIf gives MODEL_INVALID",
      "text": "2024 Developer survey is here and we would like to hear from you!\n[Take the 2024 Developer Survey](https://stackoverflow.com/dev-survey/start?utm_medium=referral&utm_source=stackexchange-community&utm_campaign=dev-survey-2024&utm_content=announcement-banner)\n\n##### Collectives\u2122 on Stack Overflow\n\nFind centralized, trusted content and collaborate around the technologies you use most.\n\n[Learn more about Collectives](https://stackoverflow.com/collectives)\n\n**Teams**\n\nQ&A for work\n\nConnect and share knowledge within a single location that is structured and easy to search.\n\n[Learn more about Teams](https://stackoverflow.co/teams/)\n\nGet early access and see previews of new features.\n\n[Learn more about Labs](https://stackoverflow.co/labs/)\n\n# [2d bin packing using or-tools: AddNoOverlap2D and OnlyEnforceIf gives MODEL\\_INVALID](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva)\n\n[Ask Question](https://stackoverflow.com/questions/ask)\n\nAsked3 years, 3 months ago\n\nModified [5 months ago](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva?lastactivity)\n\nViewed\n1k times\n\n1\n\nI am playing with a 2d bin packing model. I tried this using:\n\n```\nfor j in range(n):\n  for i in range(j):\n    model.Add(b[i] == b[j]).OnlyEnforceIf(b2[(i,j)])  # not needed?\n    model.Add(b[i] != b[j]).OnlyEnforceIf(b2[(i,j)].Not())\n    model.AddNoOverlap2D([xival[i],xival[j]],[yival[i],yival[j]]).OnlyEnforceIf(b2[(i,j)])\n\n```\n\nThe purpose here is to only enforce the no-overlap constraint if items i and j are assigned to the same bin. The combination of `AddNoOverlap2D` and `OnlyEnforceIf` seems to give the status:\n\n```\nMODEL_INVALID\n\n```\n\nIf I remove `OnlyEnforceIf(b2[(i,j)])` the (now incorrect) model solves fine.\n\nAm I correct to conclude this is just not supported in or-tools (yet)?\n\nI guess I can reformulate things to more MIP-like approach.\n\nA reproducible example is below. I used version 8.1.8487.\n\n```\nfrom ortools.sat.python import cp_model\n\n#---------------------------------------------------\n# data\n#---------------------------------------------------\n\n# bin width and height\nH = 60\nW = 40\n\n# h,w for each item\nh = [7,7]\nw = [12,12]\nn = len(h)  # number of items\nm = 2      # number of bins\n\n#---------------------------------------------------\n# or-tools model\n#---------------------------------------------------\n\nmodel = cp_model.CpModel()\n\n#\n# variables\n#\n\n# x1,x2 and y1,y2 are start and end\nx1 = [model.NewIntVar(0,W-w[i],'x1{}'.format(i)) for i in range(n)]\nx2 = [model.NewIntVar(w[i],W,'x2{}'.format(i)) for i in range(n)]\n\ny1 = [model.NewIntVar(0,H-h[i],'y1{}'.format(i)) for i in range(n)]\ny2 = [model.NewIntVar(h[i],H,'y2{}'.format(i)) for i in range(n)]\n\n# interval variables\nxival = [model.NewIntervalVar(x1[i],w[i],x2[i],'xival{}'.format(i)) for i in range(n)]\nyival = [model.NewIntervalVar(y1[i],w[i],y2[i],'yival{}'.format(i)) for i in range(n)]\n\n# bin numbers\nb = [model.NewIntVar(0,m-1,'b{}'.format(i)) for i in range(n)]\n\n# b2[(i,j)] = true if b[i]=b[j] for i<j\nb2 = {(i,j):model.NewBoolVar('b2{}.{}'.format(i,j)) for j in range(n) for i in range(j)}\n\n#\n# constraints\n#\n\nfor j in range(n):\n  for i in range(j):\n    model.Add(b[i] == b[j]).OnlyEnforceIf(b2[(i,j)])  # not needed?\n    model.Add(b[i] != b[j]).OnlyEnforceIf(b2[(i,j)].Not())\n    model.AddNoOverlap2D([xival[i],xival[j]],[yival[i],yival[j]]).OnlyEnforceIf(b2[(i,j)])\n#    model.AddNoOverlap2D([xival[i],xival[j]],[yival[i],yival[j]])  # this one works\n\n#\n# solve model\n#\nsolver = cp_model.CpSolver()\nrc = solver.Solve(model)\nprint(rc)\nprint(solver.StatusName())\n\n```\n\nNotes:\n\n- As indicated in the answer, this is just not supported.\n- A different formulation for this 2d bin packing problem is shown [here](https://yetanothermathprogrammingconsultant.blogspot.com/2021/02/2d-bin-packing-with-google-or-tools-cp.html). That seems to work quite well.\n- It is further noted that the pairwise **NoOverlap2D** formulation may not be a good thing.\n\n- [or-tools](https://stackoverflow.com/questions/tagged/or-tools)\n- [cp-sat](https://stackoverflow.com/questions/tagged/cp-sat)\n\n[Share](https://stackoverflow.com/q/66286586)\n\n[Improve this question](https://stackoverflow.com/posts/66286586/edit)\n\nFollow\n\n[edited Dec 29, 2023 at 11:18](https://stackoverflow.com/posts/66286586/revisions)\n\n[![Laurent Perron's user avatar](https://lh4.googleusercontent.com/-cuwDdwdKn_k/AAAAAAAAAAI/AAAAAAAAAjU/GxD2ND_J16g/photo.jpg?sz=64)](https://stackoverflow.com/users/9971759/laurent-perron)\n\n[Laurent Perron](https://stackoverflow.com/users/9971759/laurent-perron)\n\n10.3k11 gold badge88 silver badges2626 bronze badges\n\nasked Feb 20, 2021 at 0:07\n\n[![Erwin Kalvelagen's user avatar](https://i.sstatic.net/d4mCF.jpg?s=64)](https://stackoverflow.com/users/5625534/erwin-kalvelagen)\n\n[Erwin Kalvelagen](https://stackoverflow.com/users/5625534/erwin-kalvelagen) Erwin Kalvelagen\n\n16.6k22 gold badges1515 silver badges4040 bronze badges\n\n[Add a comment](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva)\u00a0\\|\n\n## 1 Answer 1\n\nSorted by:\n[Reset to default](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva?answertab=scoredesc#tab-top)\n\nHighest score (default)Trending (recent votes count more)Date modified (newest first)Date created (oldest first)\n\n2\n\nIf you set `solver.parameters.log_search_progress = True` you'll see:\n\n```\nParameters: log_search_progress: true\nEnforcement literal not supported in constraint: enforcement_literal: 11 no_overlap_2d { x_intervals: 0 x_intervals: 1 y_intervals: 2 y_intervals: 3 }\n...\n\n```\n\nSo yeah, it isn't supported, maybe you can open a feature request as documented [here](https://github.com/google/or-tools/blob/stable/ortools/sat/cp_model.proto#L268).\n\nBut I think you can also solve it using `OptionalIntervalVar` if you encode the bin number with booleans.\n\n[Share](https://stackoverflow.com/a/66286757)\n\n[Improve this answer](https://stackoverflow.com/posts/66286757/edit)\n\nFollow\n\n[edited Feb 20, 2021 at 0:49](https://stackoverflow.com/posts/66286757/revisions)\n\nanswered Feb 20, 2021 at 0:35\n\n[![Stradivari's user avatar](https://i.sstatic.net/Vjx2g.jpg?s=64)](https://stackoverflow.com/users/7810777/stradivari)\n\n[Stradivari](https://stackoverflow.com/users/7810777/stradivari) Stradivari\n\n2,69611 gold badge1010 silver badges2222 bronze badges\n\n4\n\n- Thanks. I don't see immediately how I can use `OptionalIntervalVar` in this context. (that is about a single item, while \"i,j in the same bin\" is about two items).\n\n\u2013\u00a0[Erwin Kalvelagen](https://stackoverflow.com/users/5625534/erwin-kalvelagen)\n\nCommentedFeb 20, 2021 at 1:09\n\n- I was thinking along the lines of one OptionalIntervalVar per (item, bin) as the noOverlap will ignore the inactive ones, but maybe I'm wrong\n\n\u2013\u00a0[Stradivari](https://stackoverflow.com/users/7810777/stradivari)\n\nCommentedFeb 20, 2021 at 1:17\n\n- Got it. Worth trying out.\n\n\u2013\u00a0[Erwin Kalvelagen](https://stackoverflow.com/users/5625534/erwin-kalvelagen)\n\nCommentedFeb 20, 2021 at 1:20\n\n- If it does work out feel free to self-answer the question yourself and accept it instead.\n\n\u2013\u00a0[Stradivari](https://stackoverflow.com/users/7810777/stradivari)\n\nCommentedFeb 20, 2021 at 1:24\n\n\n[Add a comment](https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva)\u00a0\\|\n\n## Your Answer\n\n**Reminder:** Answers generated by artificial intelligence tools are not allowed on Stack Overflow. [Learn more](https://stackoverflow.com/help/gen-ai-policy)\n\nDraft saved\n\nDraft discarded\n\n### Sign up or [log in](https://stackoverflow.com/users/login?ssrc=question_page&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f66286586%2f2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva%23new-...",
      "url": "https://stackoverflow.com/questions/66286586/2d-bin-packing-using-or-tools-addnooverlap2d-and-onlyenforceif-gives-model-inva"
    },
    {
      "title": "Yet Another Math Programming Consultant",
      "text": "Yet Another Math Programming Consultant: 2d bin packing with Google OR-Tools CP-SAT, how to fix?\n# [Yet Another Math Programming Consultant](http://yetanothermathprogrammingconsultant.blogspot.com/)\nI am a full-time consultant and provide services related to the design, implementation and deployment of mathematical programming, optimization and data-science applications. I also teach courses and workshops. Usually I cannot blog about projects I am doing, but there are many technical notes I'd like to share. Not in the least so I have an easy way to search and find them again myself. You can reach me at[erwin@amsterdamoptimization.com](mailto:erwin@amsterdamoptimization.com).\n## Saturday, February 20, 2021\n### 2d bin packing with Google OR-Tools CP-SAT, how to fix?\nIn [1] I looked at some MIP formulations for a 2d bin packing problem. OR-Tools has a nice**model.AddNoOverlap2D**constraint function. So, I was excited to try this out. (In these times I get quickly enthusiastic about these things).\nThe idea is as follows.**ortools**has this constructConstraint.OnlyEnforce If(boolean). This is essentially an**indicator constraint**: \\\\((\\\\color{darkred}x\\\\ge 5)\\\\text{.OnlyEnforceIf($\\\\color{darkred}\\\\delta$)}\\\\) means \\\\[\\\\color{darkred}\\\\delta=1 \\\\Rightarrow \\\\color{darkred}x \\\\ge 5\\\\] This inspires me to develop a model along the lines of: \\\\[\\\\begin{align} \\\\min&amp;&amp; \\\\sum\\_k \\\\color{darkred}u\\_k\\\\\\\\ &amp;&amp; \\\\color{darkred}\\\\beta\\_{i,j} = 0 \\\\Rightarrow \\\\color{darkred}b\\_i\\\\ne\\\\color{darkred}b\\_j \\\\\\\\ &amp;&amp; \\\\color{darkred}\\\\beta\\_{i,j} = 1 \\\\Rightarrow \\\\mathbf{NoOverlap2D}(i,j) \\\\\\\\ &amp;&amp; \\\\color{darkred}u\\_k = 0 \\\\Rightarrow \\\\color{darkred}b\\_i \\\\lt k \\\\end{align}\\\\] Here \\\\(\\\\color{darkred}b\\_i\\\\) is the bin number where item \\\\(i\\\\) is placed and \\\\(\\\\color{darkred}\\\\beta\\_{i,j}\\\\) is true if \\\\(\\\\color{darkred}b\\_i=\\\\color{darkred}b\\_j\\\\).\nOK, so I started coding:\n```\nfromortools.sat.pythonimportcp\\_model#---------------------------------------------------# data#---------------------------------------------------data = {'bin':{'h':60,'w':40},'cat1':{'w':7,'h':12,'items':10},'cat2':{'w':9,'h':3,'items':10},'cat3':{'w':5,'h':14,'items':10},'cat4':{'w':13,'h':9,'items':10},'cat5':{'w':6,'h':8,'items':5},'cat6':{'w':20,'h':5,'items':5}}## extract data for easier access## bin width and heightH = data['bin']['h']\nW = data['bin']['w']# h,w,cat for each itemh = [data[cat]['h']forcatindataifcat!='bin'foriinrange(data[cat]['items'])]\nw = [data[cat]['w']forcatindataifcat!='bin'foriinrange(data[cat]['items'])]\ncat = [catforcatindataifcat!='bin'foriinrange(data[cat]['items'])]\nn = len(h)# number of itemsm =10# number of bins#---------------------------------------------------# or-tools model#---------------------------------------------------model = cp\\_model.CpModel()## variables## x1,x2 and y1,y2 are start and endx1 = [model.NewIntVar(0,W-w[i],f'x1.{i}')foriinrange(n)]\nx2 = [model.NewIntVar(w[i],W,f'x2.{i}')foriinrange(n)]\ny1 = [model.NewIntVar(0,H-h[i],f'y1.{i}')foriinrange(n)]\ny2 = [model.NewIntVar(h[i],H,f'y2.{i}')foriinrange(n)]# interval variablesxival = [model.NewIntervalVar(x1[i],w[i],x2[i],f'xival{i}')foriinrange(n)]\nyival = [model.NewIntervalVar(y1[i],h[i],y2[i],f'yival{i}')foriinrange(n)]# bin numbersb = [model.NewIntVar(0,m,f'b{i}')foriinrange(n)]# b2[(i,j)] = true if b[i]=b[j] for i&lt;jb2 = {(i,j):model.NewBoolVar(f'b2.{i}.{j}')forjinrange(n)foriinrange(j)}# used binsu = [model.NewBoolVar(f'u{k}')forkinrange(m)]## constraints## no overlap for items in same binforjinrange(n):foriinrange(j):\nmodel.Add(b[i] != b[j]).OnlyEnforceIf(b2[(i,j)].Not())\nmodel.AddNoOverlap2D([xival[i],xival[j]],[yival[i],yival[j]]).OnlyEnforceIf(b2[(i,j)])# used binforiinrange(n):forkinrange(m):\nmodel.Add(b[i]&lt;k).OnlyEnforceIf(u[k].Not())# objectivemodel.Minimize(sum([u[k]forkinrange(m)]))## solve model#solver = cp\\_model.CpSolver()\nrc = solver.Solve(model)\nprint(rc)\nprint(solver.StatusName())\n```\nWork in progress, so I expect to see problems. When I run this I see:\n[![](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgoUVej0zCx3idJOVl062n2m4xKAwxMzegX1nitQU2MKZA2y11X0emjDENcDM6HMG4CJUASvQNqT9J3RGhEPswLi-B8v3M_8upET9VspswZwk8lWTbo2fqk_THp7xFTgEFgh0721pruLz-I/s16000/image.png)](https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgoUVej0zCx3idJOVl062n2m4xKAwxMzegX1nitQU2MKZA2y11X0emjDENcDM6HMG4CJUASvQNqT9J3RGhEPswLi-B8v3M_8upET9VspswZwk8lWTbo2fqk_THp7xFTgEFgh0721pruLz-I/)\nOK. That is not helpful. After a bit of trial and error, it looks like**OnlyEnforceIf**is not implemented for the**AddNoOverlap2D**constraints. Indeed, we can verify this withsolver.parameters.log\\_search\\_progress = True[2]. At first, I did not see anything (I was running this in a Jupyter notebook on colab.google.com; Jupyter notebooks are notorious for not displaying logs and error messages). Running it locally from the command line, I saw:\nEnforcement literal not supported in constraint: enforcement\\_literal: 256 no\\_overlap\\_2d { x\\_intervals: 0 x\\_intervals: 1 y\\_intervals: 50 y\\_intervals: 51 }\nThis confirms this is not supported.\nI am not sure how to fix this with a simple work-around. If desperate, I could try to use some of the MIP formulations we did earlier.\nWell, a bit too early to give up. Here is an alternative approach based on the proposal by Aliaksei Vaidzelevich in the comments below.\n#### Attempt number 2\nInstead of using the**NoOverlap2D**constraints within each bin, we just create one large area. It's width is \\\\(\\\\color{darkblue}m\\\\cdot \\\\color{darkblue}W\\\\) and the height is just \\\\(\\\\color{darkblue}H\\\\). Here \\\\(\\\\color{darkblue}W\\\\) and \\\\(\\\\color{darkblue}H\\\\) are the width and height of each bin, and \\\\(\\\\color{darkblue}m\\\\) is the number if bins we consider. The high-level model can look like:\\\\[\\\\begin{align} \\\\min\\\\&gt;&gt;&amp;&amp; \\\\color{darkred} z \\\\\\\\ &amp;&amp; \\\\color{darkred}z = \\\\max\\_i{\\\\color{darkred}b\\_i} \\\\\\\\ &amp;&amp; \\\\color{darkred}x'\\_i = \\\\color{darkred}x\\_i + \\\\color{darkred}b\\_i \\\\cdot \\\\color{darkblue}W \\\\\\\\ &amp;&amp; \\\\mathbf{NoOverlap2D}(\\\\color{darkred}x',\\\\color{darkred}y) \\\\\\\\ &amp;&amp; 0 \\\\le \\\\color{darkred}x\\_i \\\\le \\\\color{darkblue}W-\\\\color{darkblue}w\\_i \\\\\\\\ &amp;&amp; 0 \\\\le \\\\color{darkred}y\\_i \\\\le \\\\color{darkblue}H-\\\\color{darkblue}h\\_i \\\\end{align}\\\\]\nThis solves almost immediately. The code looks like:\n```\n%%timefromortools.sat.pythonimportcp\\_modelimportpandas#---------------------------------------------------# data#---------------------------------------------------data = {'bin':{'h':60,'w':40},'cat1':{'w':7,'h':12,'items':10},'cat2':{'w':9,'h':3,'items':10},'cat3':{'w':5,'h':14,'items':10},'cat4':{'w':13,'h':9,'items':10},'cat5':{'w':6,'h':8,'items':5},'cat6':{'w':20,'h':5,'items':5}}## extract data for easier access## bin width and heightH = data['bin']['h']\nW = data['bin']['w']# h,w,cat for each itemh = [data[cat]['h']forcatindataifcat!='bin'foriinrange(data[cat]['items'])]\nw = [data[cat]['w']forcatindataifcat!='bin'foriinrange(data[cat]['items'])]\ncat = [catforcatindataifcat!='bin'foriinrange(data[cat]['items'])]\nn = len(h)# number of itemsm =10# max number of bins#---------------------------------------------------# or-tools model#---------------------------------------------------model = cp\\_model.CpModel()## variables## x and yx = [model.NewIntVar(0,W-w[i],f'x{i}')foriinrange(n)]\nxb1 = [model.NewIntVar(0,m\\*W-w[i],f'xb1.{i}')foriinrange(n)]\nxb2 = [model.NewIntVar(w[i],m\\*W,f'xb2.{i}')foriinrange(n)]\ny1 = [model.NewIntVar(0,H-h[i],f'y1.{i}')foriinrange(n)]\ny2 = [model.NewIntVar(h[i],H,f'y2.{i}')foriinrange(n)]# interval variablesxival = [model.NewIntervalVar(xb1[i],w[i],xb2[i],f'xival{i}')foriinrange(n)]\nyival = [model.NewIntervalVar(y1[i],h[i],y2[i],f'yival{i}')foriinrange(n)]# bin numbersb = [model.NewIntVar(0,m-1,f'b{i}')foriinrange(n)]# objectivez = model.NewIntVar(0,m-1,'z')## constraints#foriinrange(n):\nmodel.Add(xb1[i] == x[i] + b[i]\\*W)\nmodel.Add(xb2[i] == xb1[i] + w[i])\nmod...",
      "url": "https://yetanothermathprogrammingconsultant.blogspot.com/2021/02/2d-bin-packing-with-google-or-tools-cp.html"
    },
    {
      "title": "OR-Tools Examples \n\n    \n    \n       \n    \n\n     \n      \n      Stay organized with collections\n     \n     \n      \n      Save and categorize content based on your preferences.",
      "text": "OR-Tools Examples | Google for Developers[Skip to main content](#main-content)\n[\n![Google OR-Tools](https://developers.google.com/static/optimization/images/orLogo.png)\n](https://developers.google.com/optimization)\n* [GoogleOR-Tools](https://developers.google.com/optimization)\n/\n* English\n* Deutsch\n* Espa\u00f1ol\n* Espa\u00f1ol \u2013Am\u00e9rica Latina\n* Fran\u00e7ais\n* Indonesia\n* Italiano\n* Polski\n* Portugu\u00eas \u2013Brasil\n* Ti\u00ea\u0301ng Vi\u00ea\u0323t\n* T\u00fcrk\u00e7e\n* \u0420\u0443\u0441\u0441\u043a\u0438\u0439* \u05e2\u05d1\u05e8\u05d9\u05ea* \u0627\u0644\u0639\u0631\u0628\u064a\u0651\u0629* \u0641\u0627\u0631\u0633\u06cc* \u0939\u093f\u0902\u0926\u0940* \u09ac\u09be\u0982\u09b2\u09be* \u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22* \u4e2d\u6587\u2013\u7b80\u4f53* \u4e2d\u6587\u2013\u7e41\u9ad4* \u65e5\u672c\u8a9e* \ud55c\uad6d\uc5b4Sign in\n* [OR-Tools](https://developers.google.com/optimization)\n* [Home](https://developers.google.com/)\n* [Products](https://developers.google.com/products)\n* [OR-Tools](https://developers.google.com/optimization)\n* [Examples](https://developers.google.com/optimization/examples)\nSend feedback# OR-Tools ExamplesStay organized with collectionsSave and categorize content based on your preferences.\n![Spark icon](https://developers.google.com/_static/images/icons/spark.svg)\n## Page Summary\noutlined\\_flag\n* This page provides a variety of code examples and tutorials for different optimization problems, including linear optimization, integer optimization, constraint optimization, and routing.\n* The examples cover various use cases like the Traveling Salesperson Problem (TSP), Vehicle Routing Problem (VRP), and more, with variations like capacity constraints, pickup and delivery, and time windows.\n* Users can access code in C++, Python, .Net, and Java, along with accompanying tutorials to understand the implementation.\n* Interactive Colabs are available, allowing users to run the code demos directly in their browser for immediate experimentation.\n* The table organizes these resources by problem type and interface, providing easy navigation to relevant materials for specific optimization needs.\nThe following table provides links to:\n* Code examples in the supported languages: C++![](https://developers.google.com/static/optimization/images/cppLogo.svg)Python![](https://developers.google.com/static/optimization/images/pythonLogo.svg)DotNet![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)Java![](https://developers.google.com/static/optimization/images/javaLogo.svg)\n* Tutorials that explain the examples.![](https://developers.google.com/static/optimization/images/orLogo.png)\n* Colabs &mdash; code demos that you can run directly in your browser.![](https://developers.google.com/static/optimization/images/colabLogo.svg)\nLinear OptimizationInteger OptimizationConstraint OptimizationAssignmentPackingSchedulingRoutingNetwork FlowsRouting SolverMPSolverCP-SAT SolverCP SolverPDLP SolverKnapsack SolverAssignment SolverTutorialColabC++Python.NetJava|Problem Type|Interface|Description|Tutorials Colabs|Code examples|\nLinear Optimization|MPSolver (GLOP)|Simple linear programming example|[![](https://developers.google.com/static/optimization/images/orLogo.png)](https://developers.google.com/optimization/lp/lp_example)[![](https://developers.google.com/static/optimization/images/colabLogo.svg)](https://colab.research.google.com/github/google/or-tools/blob/stable/examples/notebook/linear_solver/linear_programming_example.ipynb)|[![](https://developers.google.com/static/optimization/images/cppLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/linear_programming_example.cc)[![](https://developers.google.com/static/optimization/images/pythonLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/linear_programming_example.py)[![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/LinearProgrammingExample.cs)[![](https://developers.google.com/static/optimization/images/javaLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/LinearProgrammingExample.java)|\nInteger Optimization|MPSolver (SCIP)|Simple mixed-integer programming example|[![](https://developers.google.com/static/optimization/images/orLogo.png)](https://developers.google.com/optimization/mip/mip_example)[![](https://developers.google.com/static/optimization/images/colabLogo.svg)](https://colab.research.google.com/github/google/or-tools/blob/stable/examples/notebook/linear_solver/simple_mip_program.ipynb)|[![](https://developers.google.com/static/optimization/images/cppLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/simple_mip_program.cc)[![](https://developers.google.com/static/optimization/images/pythonLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/simple_mip_program.py)[![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/SimpleMipProgram.cs)[![](https://developers.google.com/static/optimization/images/javaLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/linear_solver/samples/SimpleMipProgram.java)|\nConstraint Optimization|CP-SAT Solver|Simple constraint programming example|[![](https://developers.google.com/static/optimization/images/orLogo.png)](https://developers.google.com/optimization/cp/cp_example)[![](https://developers.google.com/static/optimization/images/colabLogo.svg)](https://colab.research.google.com/github/google/or-tools/blob/stable/examples/notebook/sat/cp_sat_example.ipynb)|[![](https://developers.google.com/static/optimization/images/cppLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/cp_sat_example.cc)[![](https://developers.google.com/static/optimization/images/pythonLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/cp_sat_example.py)[![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/CpSatExample.cs)[![](https://developers.google.com/static/optimization/images/javaLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/CpSatExample.java)|\nConstraint Optimization|CP-SAT Solver|Simple CP program|[![](https://developers.google.com/static/optimization/images/colabLogo.svg)](https://colab.research.google.com/github/google/or-tools/blob/stable/examples/notebook/sat/solve_with_time_limit_sample_sat.ipynb)|[![](https://developers.google.com/static/optimization/images/cppLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/solve_with_time_limit_sample_sat.cc)[![](https://developers.google.com/static/optimization/images/pythonLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/solve_with_time_limit_sample_sat.py)[![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/SolveWithTimeLimitSampleSat.cs)[![](https://developers.google.com/static/optimization/images/javaLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/sat/samples/SolveWithTimeLimitSampleSat.java)|\nRouting|Routing solver|Simple TSP example|[![](https://developers.google.com/static/optimization/images/colabLogo.svg)](https://colab.research.google.com/github/google/or-tools/blob/stable/examples/notebook/constraint_solver/tsp.ipynb)|[![](https://developers.google.com/static/optimization/images/cppLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/constraint_solver/samples/tsp.cc)[![](https://developers.google.com/static/optimization/images/pythonLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/constraint_solver/samples/tsp.py)[![](https://developers.google.com/static/optimization/images/dotnetLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/constraint_solver/samples/Tsp.cs)[![](https://developers.google.com/static/optimization/images/javaLogo.svg)](https://github.com/google/or-tools/blob/stable/ortools/constraint_solver/samples/Tsp.java)|\nRouting|Routing solver...",
      "url": "https://developers.google.com/optimization/examples"
    },
    {
      "title": "Solving a CP Problem \n\n    \n    \n       \n    \n\n     \n      \n      Stay organized with collections\n     \n     \n      \n      Save and categorize content based on your preferences.",
      "text": "Solving a CP Problem | OR-Tools | Google for Developers[Skip to main content](#main-content)\n[\n![Google OR-Tools](https://developers.google.com/static/optimization/images/orLogo.png)\n](https://developers.google.com/optimization)\n* [GoogleOR-Tools](https://developers.google.com/optimization)\n/\n* English\n* Deutsch\n* Espa\u00f1ol\n* Espa\u00f1ol \u2013Am\u00e9rica Latina\n* Fran\u00e7ais\n* Indonesia\n* Italiano\n* Polski\n* Portugu\u00eas \u2013Brasil\n* Ti\u00ea\u0301ng Vi\u00ea\u0323t\n* T\u00fcrk\u00e7e\n* \u0420\u0443\u0441\u0441\u043a\u0438\u0439* \u05e2\u05d1\u05e8\u05d9\u05ea* \u0627\u0644\u0639\u0631\u0628\u064a\u0651\u0629* \u0641\u0627\u0631\u0633\u06cc* \u0939\u093f\u0902\u0926\u0940* \u09ac\u09be\u0982\u09b2\u09be* \u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22* \u4e2d\u6587\u2013\u7b80\u4f53* \u4e2d\u6587\u2013\u7e41\u9ad4* \u65e5\u672c\u8a9e* \ud55c\uad6d\uc5b4Sign in\n* [OR-Tools](https://developers.google.com/optimization)\n* [Home](https://developers.google.com/)\n* [Products](https://developers.google.com/products)\n* [OR-Tools](https://developers.google.com/optimization)\n* [Guides](https://developers.google.com/optimization/introduction)\nSend feedback# Solving a CP ProblemStay organized with collectionsSave and categorize content based on your preferences.\n![Spark icon](https://developers.google.com/_static/images/icons/spark.svg)\n## Page Summary\noutlined\\_flag\n* This page demonstrates how to find an optimal solution to a Constraint Programming (CP) problem using the CP-SAT solver.\n* The example problem involves maximizing a linear objective function with three integer variables subject to three linear constraints.\n* To ensure computational efficiency, constraints with non-integer coefficients must be transformed into equivalent constraints with integer coefficients before solving.\n* The provided code examples in Python, C++, Java, and C# guide through the process of defining the model, variables, constraints, objective function, and invoking the solver.\n* The CP-SAT solver finds the optimal solution for the given problem, maximizing the objective function to a value of 35 with specific values for the variables (x=7, y=3, z=5).\nThe previous section showed how to find all solutions to a CP problem. Next,\nwe&#39;ll show how to find an optimal solution. As an example, we&#39;ll solve the\nfollowing optimization problem.\nMaximize 2*x*+ 2*y*+ 3*z*subject to the following constraints:*x*+7&frasl;2*y*+3&frasl;2*z*|&le;|25|\n3*x*- 5*y*+ 7*z*|&le;|45|\n5*x*+ 2*y*- 6*z*|&le;|37|\n*x*,*y*,*z*|&ge;|0|\n*x*,*y*,*z*integers|\nIn order to increase computational speed, the CP-SAT solver works over the\nintegers. This means all constraints and the objective must have integer\ncoefficients. In the above example, the first constraint doesn&#39;t meet this\ncondition. To solve the problem, you must first transform the constraint by\nmultiplying it by a sufficiently large integer to convert all the coefficients\nto integers.\nThis is shown in the[Constraints](#constraints)section below.\n## Solution using the CP-SAT solver\nThe following sections present a Python program that solves the problem using\nthe CP-SAT solver.\n### Import the libraries\nThe following code imports the required library.\n### Python\n```\nfromortools.sat.pythonimportcp\\_model\n```\n### C++\n```\n#include &lt;stdint.h&gt;#include &lt;stdlib.h&gt;#include &lt;algorithm&gt;#include\"absl/base/log\\_severity.h\"#include\"absl/log/globals.h\"#include\"ortools/base/init\\_google.h\"#include\"ortools/base/logging.h\"#include\"ortools/sat/cp\\_model.h\"#include\"ortools/sat/cp\\_model.pb.h\"#include\"ortools/sat/cp\\_model\\_solver.h\"#include\"ortools/util/sorted\\_interval\\_list.h\"\n```\n### Java\n```\nimport staticjava.util.Arrays.stream;importcom.google.ortools.Loader;importcom.google.ortools.sat.CpModel;importcom.google.ortools.sat.CpSolver;importcom.google.ortools.sat.CpSolverStatus;importcom.google.ortools.sat.IntVar;importcom.google.ortools.sat.LinearExpr;\n```\n### C#\n```\nusingSystem;usingSystem.Linq;usingGoogle.OrTools.Sat;\n```\n### Declare the model\nThe following code declares the model for the problem.\n### Python\n```\nmodel=cp\\_model.CpModel()\n```\n### C++\n```\nCpModelBuildercp\\_model;\n```\n### Java\n```\nCpModelmodel=newCpModel();\n```\n### C#\n```\nCpModelmodel=newCpModel();\n```\n### Create the variables\nThe following code creates the variables for the problem.\n### Python\n```\nvar\\_upper\\_bound=max(50,45,37)x=model.new\\_int\\_var(0,var\\_upper\\_bound,\"x\")y=model.new\\_int\\_var(0,var\\_upper\\_bound,\"y\")z=model.new\\_int\\_var(0,var\\_upper\\_bound,\"z\")\n```\n### C++\n```\nint64\\_tvar\\_upper\\_bound=std::max({50,45,37});constDomaindomain(0,var\\_upper\\_bound);constIntVarx=cp\\_model.NewIntVar(domain).WithName(\"x\");constIntVary=cp\\_model.NewIntVar(domain).WithName(\"y\");constIntVarz=cp\\_model.NewIntVar(domain).WithName(\"z\");\n```\n### Java\n```\nintvarUpperBound=stream(newint[]{50,45,37}).max().getAsInt();IntVarx=model.newIntVar(0,varUpperBound,\"x\");IntVary=model.newIntVar(0,varUpperBound,\"y\");IntVarz=model.newIntVar(0,varUpperBound,\"z\");\n```\n### C#\n```\nintvarUpperBound=newint[]{50,45,37}.Max();IntVarx=model.NewIntVar(0,varUpperBound,\"x\");IntVary=model.NewIntVar(0,varUpperBound,\"y\");IntVarz=model.NewIntVar(0,varUpperBound,\"z\");\n```\n### Define the constraints\nSince the first constraint,\n*x*+7&frasl;2*y*+3&frasl;2*z*|&le;|25|\nhas non-integer coefficients, you must first multiply the entire constraint by a\nsufficiently large integer to convert the coefficients to integers. In this case\n, you can multiply by 2, which results in the new constraint\n2*x*+ 7*y*+ 3*z*|&le;|50|\nThis doesn&#39;t change the problem, since the original constraint has exactly the\nsame solutions as the transformed constraint.\nThe following code defines the three linear constraints for the problem:\n### Python\n```\nmodel.add(2\\*x+7\\*y+3\\*z&lt;=50)model.add(3\\*x-5\\*y+7\\*z&lt;=45)model.add(5\\*x+2\\*y-6\\*z&lt;=37)\n```\n### C++\n```\ncp\\_model.AddLessOrEqual(2\\*x+7\\*y+3\\*z,50);cp\\_model.AddLessOrEqual(3\\*x-5\\*y+7\\*z,45);cp\\_model.AddLessOrEqual(5\\*x+2\\*y-6\\*z,37);\n```\n### Java\n```\nmodel.addLessOrEqual(LinearExpr.weightedSum(newIntVar[]{x,y,z},newlong[]{2,7,3}),50);model.addLessOrEqual(LinearExpr.weightedSum(newIntVar[]{x,y,z},newlong[]{3,-5,7}),45);model.addLessOrEqual(LinearExpr.weightedSum(newIntVar[]{x,y,z},newlong[]{5,2,-6}),37);\n```\n### C#\n```\nmodel.Add(2\\*x+7\\*y+3\\*z&lt;=50);model.Add(3\\*x-5\\*y+7\\*z&lt;=45);model.Add(5\\*x+2\\*y-6\\*z&lt;=37);\n```\n### Define the objective function\nThe following code defines the objective function for the problem and declares\nit to be a maximization problem:\n### Python\n```\nmodel.maximize(2\\*x+2\\*y+3\\*z)\n```\n### C++\n```\ncp\\_model.Maximize(2\\*x+2\\*y+3\\*z);\n```\n### Java\n```\nmodel.maximize(LinearExpr.weightedSum(newIntVar[]{x,y,z},newlong[]{2,2,3}));\n```\n### C#\n```\nmodel.Maximize(2\\*x+2\\*y+3\\*z);\n```\n### Call the solver\nThe following code calls the solver.\n### Python\n```\nsolver=cp\\_model.CpSolver()status=solver.solve(model)\n```\n### C++\n```\nconstCpSolverResponseresponse=Solve(cp\\_model.Build());\n```\n### Java\n```\nCpSolversolver=newCpSolver();CpSolverStatusstatus=solver.solve(model);\n```\n### C#\n```\nCpSolversolver=newCpSolver();CpSolverStatusstatus=solver.Solve(model);\n```\n### Display the solution\nThe following code displays the results.\n### Python\n```\nifstatus==cp\\_model.OPTIMALorstatus==cp\\_model.FEASIBLE:print(f\"Maximum of objective function:{solver.objective\\_value}\\\\n\")print(f\"x ={solver.value(x)}\")print(f\"y ={solver.value(y)}\")print(f\"z ={solver.value(z)}\")else:print(\"No solution found.\")\n```\n### C++\n```\nif(response.status()==CpSolverStatus::OPTIMAL||response.status()==CpSolverStatus::FEASIBLE){// Get the value of x in the solution.LOG(INFO)&lt;&lt;\"Maximum of objective function: \"&lt;&lt;response.objective\\_value();LOG(INFO)&lt;&lt;\"x = \"&lt;&lt;SolutionIntegerValue(response,x);LOG(INFO)&lt;&lt;\"y = \"&lt;&lt;SolutionIntegerValue(response,y);LOG(INFO)&lt;&lt;\"z = \"&lt;&lt;SolutionIntegerValue(response,z);}else{LOG(INFO)&lt;&lt;\"No solution found.\";}\n```\n### Java\n```\nif(status==CpSolverStatus.OPTIMAL||status==CpSolverStatus.FEASIBLE){System.out.printf(\"Maximum of objective function: %f%n\",solver.objectiveValue());System.out.println(\"x = \"+solver.value(x));System.out.println(\"y = \"+solver.value(y));System.out.println(\"z = \"+solver.value(z));}else{System.out.println(\"No solution found.\");}\n```\n### C#\n```\nif(status==CpSolverStatus.Optim...",
      "url": "https://developers.google.com/optimization/cp/cp_example"
    },
    {
      "title": "Search code, repositories, users, issues, pull requests...",
      "text": "or-tools/ortools/sat/samples/binpacking\\_problem\\_sat.py at stable \u00b7google/or-tools \u00b7GitHub\n[Skip to content](#start-of-content)\n## Navigation Menu\nToggle navigation\n[](https://github.com/)\n[Sign in](https://github.com/login?return_to=https://github.com/google/or-tools/blob/stable/ortools/sat/samples/binpacking_problem_sat.py)\nAppearance settings\nSearch or jump to...\n# Search code, repositories, users, issues, pull requests...\n</option></form>\nSearch\nClear\n[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)\n# Provide feedback\n</option></form>\nWe read every piece of feedback, and take your input very seriously.\nInclude my email address so I can be contacted\nCancelSubmit feedback\n# Saved searches\n## Use saved searches to filter your results more quickly\n</option></form>\nName\nQuery\nTo see all available qualifiers, see our[documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).\nCancelCreate saved search\n[Sign in](https://github.com/login?return_to=https://github.com/google/or-tools/blob/stable/ortools/sat/samples/binpacking_problem_sat.py)\n[Sign up](https://github.com/signup?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=/%3Cuser-name%3E/%3Crepo-name%3E/blob/show&amp;source=header-repo&amp;source_repo=google/or-tools)\nAppearance settings\nResetting focus\nYou signed in with another tab or window.[Reload]()to refresh your session.You signed out in another tab or window.[Reload]()to refresh your session.You switched accounts on another tab or window.[Reload]()to refresh your session.Dismiss alert\n{{ message }}\n[google](https://github.com/google)/**[or-tools](https://github.com/google/or-tools)**Public\n* [Notifications](https://github.com/login?return_to=/google/or-tools)You must be signed in to change notification settings\n* [Fork2.3k](https://github.com/login?return_to=/google/or-tools)\n* [Star13k](https://github.com/login?return_to=/google/or-tools)\n</turbo-frame></main>\nYou can\u2019t perform that action at this time.\n</div>",
      "url": "https://github.com/google/or-tools/blob/stable/ortools/sat/samples/binpacking_problem_sat.py"
    },
    {
      "title": "Google OR-Tools Reference \n\n    \n    \n       \n    \n\n     \n      \n      Stay organized with collections\n     \n     \n      \n      Save and categorize content based on your preferences.",
      "text": "Google OR-Tools Reference | Google for Developers[Skip to main content](#main-content)\n[\n![Google OR-Tools](https://developers.google.com/static/optimization/images/orLogo.png)\n](https://developers.google.com/optimization)\n* [GoogleOR-Tools](https://developers.google.com/optimization)\n/\n* English\n* Deutsch\n* Espa\u00f1ol\n* Fran\u00e7ais\n* Indonesia\n* Portugu\u00eas \u2013Brasil\n* \u0420\u0443\u0441\u0441\u043a\u0438\u0439* \u4e2d\u6587\u2013\u7b80\u4f53* \u65e5\u672c\u8a9e* \ud55c\uad6d\uc5b4Sign in\n* [OR-Tools](https://developers.google.com/optimization)\n* [Home](https://developers.google.com/)\n* [Products](https://developers.google.com/products)\n* [OR-Tools](https://developers.google.com/optimization)\n* [Reference](https://developers.google.com/optimization/reference)\nSend feedback# Google OR-Tools ReferenceStay organized with collectionsSave and categorize content based on your preferences.\nTo see OR-Tools reference documentation for C++, .Net, Java or Python, see the\nfollowing page on GitHub:\nC++:\n* [C++ reference (doxygen)](https://or-tools.github.io/docs/cpp/index.html)\n.Net:\n* [.Net reference (doxygen)](https://or-tools.github.io/docs/dotnet/index.html)\nJava:\n* [Java reference (javadoc)](https://or-tools.github.io/docs/javadoc/index.html)\n* [Java reference (doxygen)](https://or-tools.github.io/docs/java/index.html)\nPython:\n* [Python reference (pdoc)](https://or-tools.github.io/docs/pdoc/ortools.html)\n* [Python reference (doxygen)](https://or-tools.github.io/docs/python/index.html)\nSend feedback\nExcept as otherwise noted, the content of this page is licensed under the[Creative Commons Attribution 4.0 License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the[Apache 2.0 License](https://www.apache.org/licenses/LICENSE-2.0). For details, see the[Google Developers Site Policies](https://developers.google.com/site-policies). Java is a registered trademark of Oracle and/or its affiliates.\nLast updated 2025-06-05 UTC.\nNeed to tell us more?[[[\"Easy to understand\",\"easyToUnderstand\",\"thumb-up\"],[\"Solved my problem\",\"solvedMyProblem\",\"thumb-up\"],[\"Other\",\"otherUp\",\"thumb-up\"]],[[\"Missing the information I need\",\"missingTheInformationINeed\",\"thumb-down\"],[\"Too complicated / too many steps\",\"tooComplicatedTooManySteps\",\"thumb-down\"],[\"Out of date\",\"outOfDate\",\"thumb-down\"],[\"Samples / code issue\",\"samplesCodeIssue\",\"thumb-down\"],[\"Other\",\"otherDown\",\"thumb-down\"]],[\"Last updated 2025-06-05 UTC.\"],[],[\"OR-Tools reference documentation for different programming languages is available on GitHub. For C++, access the Doxygen reference. .Net users can find their Doxygen reference. Java users have two options: the Javadoc and the Doxygen reference. Python users can choose between the Pdoc and the Doxygen reference. Each language's documentation is provided through specific links.\\\\n\"]]",
      "url": "https://developers.google.com/optimization/reference"
    },
    {
      "title": "The Bin Packing Problem \n\n    \n    \n       \n    \n\n     \n      \n      Stay organized with collections\n     \n     \n      \n      Save and categorize content based on your preferences.",
      "text": "The Bin Packing Problem | OR-Tools | Google for Developers[Skip to main content](#main-content)\n[\n![Google OR-Tools](https://developers.google.com/static/optimization/images/orLogo.png)\n](https://developers.google.com/optimization)\n* [GoogleOR-Tools](https://developers.google.com/optimization)\n/\n* English\n* Deutsch\n* Espa\u00f1ol\n* Espa\u00f1ol \u2013Am\u00e9rica Latina\n* Fran\u00e7ais\n* Indonesia\n* Italiano\n* Polski\n* Portugu\u00eas \u2013Brasil\n* Ti\u00ea\u0301ng Vi\u00ea\u0323t\n* T\u00fcrk\u00e7e\n* \u0420\u0443\u0441\u0441\u043a\u0438\u0439* \u05e2\u05d1\u05e8\u05d9\u05ea* \u0627\u0644\u0639\u0631\u0628\u064a\u0651\u0629* \u0641\u0627\u0631\u0633\u06cc* \u0939\u093f\u0902\u0926\u0940* \u09ac\u09be\u0982\u09b2\u09be* \u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22* \u4e2d\u6587\u2013\u7b80\u4f53* \u4e2d\u6587\u2013\u7e41\u9ad4* \u65e5\u672c\u8a9e* \ud55c\uad6d\uc5b4Sign in\n* [OR-Tools](https://developers.google.com/optimization)\n* [Home](https://developers.google.com/)\n* [Products](https://developers.google.com/products)\n* [OR-Tools](https://developers.google.com/optimization)\n* [Guides](https://developers.google.com/optimization/introduction)\nSend feedback# The Bin Packing ProblemStay organized with collectionsSave and categorize content based on your preferences.\n![Spark icon](https://developers.google.com/_static/images/icons/spark.svg)\n## Page Summary\noutlined\\_flag\n* The bin packing problem aims to pack items into the minimum number of bins, each with a fixed capacity, without considering item values.\n* A Mixed Integer Programming (MIP) model is used, with binary variables representing item-bin assignments and bin usage.\n* Constraints ensure each item is assigned to one bin and that bin capacities are respected.\n* The objective function minimizes the total number of bins used in the packing solution.\n* The solution provides the optimal assignment of items to bins, minimizing the total bins used and detailing the items and weights in each bin.\nLike the multiple knapsack problem, the bin packing problem also involves\npacking items into bins. However, the bin packing problem has a different\nobjective: find the fewest bins that will hold all the items.\nThe following summarizes the differences between the two problems:\n* Multiple knapsack problem: Pack a subset of the items into a fixed number of\nbins, with varying capacities, so that the total value of the packed items\nis a maximum.\n* Bin packing problem: Given as many bins with a common capacity as necessary,\nfind the fewest that will hold all the items. In this problem, the items\naren&#39;t assigned values, because the objective doesn&#39;t involve value.\nThe next example shows how to solve a bin packing problem.\n## Example\nIn this example, items of various weights need to be packed into a set of bins\nwith a common capacity. Assuming that there are enough bins to hold all the\nitems, the problem is to find the fewest that will suffice.\nThe following sections present programs that solve this problem. For the full\nprograms, see[Complete programs](#complete_programs).\nThis example uses the[MPSolver wrapper](https://developers.google.com/optimization/lp/mpsolver).\n### Import the libraries\nThe code below imports the required libraries.\n### Python\n```\nfromortools.linear\\_solverimportpywraplp\n```\n### C++\n```\n#include &lt;iostream&gt;#include &lt;memory&gt;#include &lt;numeric&gt;#include &lt;ostream&gt;#include &lt;vector&gt;#include\"ortools/linear\\_solver/linear\\_expr.h\"#include\"ortools/linear\\_solver/linear\\_solver.h\"\n```\n### Java\n```\nimportcom.google.ortools.Loader;importcom.google.ortools.linearsolver.MPConstraint;importcom.google.ortools.linearsolver.MPObjective;importcom.google.ortools.linearsolver.MPSolver;importcom.google.ortools.linearsolver.MPVariable;\n```\n### C#\n```\nusingSystem;usingGoogle.OrTools.LinearSolver;\n```\n### Create the data\nThe code below creates the data for the example.\n### Python\n```\ndefcreate\\_data\\_model():\"\"\"Create the data for the example.\"\"\"data={}weights=[48,30,19,36,36,27,42,42,36,24,30]data[\"weights\"]=weightsdata[\"items\"]=list(range(len(weights)))data[\"bins\"]=data[\"items\"]data[\"bin\\_capacity\"]=100returndata\n```\n### C++\n```\nstructDataModel{conststd::vector&lt;double&gt;weights={48,30,19,36,36,27,42,42,36,24,30};constintnum\\_items=weights.size();constintnum\\_bins=weights.size();constintbin\\_capacity=100;};\n```\n### Java\n```\nstaticclassDataModel{publicfinaldouble[]weights={48,30,19,36,36,27,42,42,36,24,30};publicfinalintnumItems=weights.length;publicfinalintnumBins=weights.length;publicfinalintbinCapacity=100;}\n```\n### C#\n```\nclassDataModel{publicstaticdouble[]Weights={48,30,19,36,36,27,42,42,36,24,30};publicintNumItems=Weights.Length;publicintNumBins=Weights.Length;publicdoubleBinCapacity=100.0;}\n```\nThe data includes the following:\n* `weights`: A vector containing the weights of the items.\n* `bin\\_capacity`: A single number giving the capacity of the bins.\nThere are no values assigned to the items because the goal of minimizing the\nnumber of bins doesn&#39;t involve value.\nNote that`num\\_bins`is set to the number of items. This is because if the\nproblem has a solution, then the weight of every item must be less than or equal\nto the bin capacity. In that case, the maximum number of bins you could need is\nthe number of items, because you could always put each item in a separate bin.\n### Declare the solver\nThe following code declares the solver.\n### Python\n```\n# Create the mip solver with the SCIP backend.solver=pywraplp.Solver.CreateSolver(\"SCIP\")ifnotsolver:return\n```\n### C++\n```\n// Create the mip solver with the SCIP backend.std::unique\\_ptr&lt;&lt;MPSolver&gt;&gt;solver(MPSolver::CreateSolver(\"SCIP\"));if(!solver){LOG(WARNING)&lt;&lt;\"SCIP solver unavailable.\";return;}\n```\n### Java\n```\n// Create the linear solver with the SCIP backend.MPSolversolver=MPSolver.createSolver(\"SCIP\");if(solver==null){System.out.println(\"Could not create solver SCIP\");return;}\n```\n### C#\n```\n// Create the linear solver with the SCIP backend.Solversolver=Solver.CreateSolver(\"SCIP\");if(solverisnull){return;}\n```\n### Create the variables\nThe following code creates the variables for the program.\n### Python\n```\n# Variables# x[i, j] = 1 if item i is packed in bin j.x={}foriindata[\"items\"]:forjindata[\"bins\"]:x[(i,j)]=solver.IntVar(0,1,\"x\\_%i\\_%i\"%(i,j))# y[j] = 1 if bin j is used.y={}forjindata[\"bins\"]:y[j]=solver.IntVar(0,1,\"y[%i]\"%j)\n```\n### C++\n```\nstd::vector&lt;std::vector&lt;constMPVariable\\*&gt;&gt;x(data.num\\_items,std::vector&lt;constMPVariable\\*&gt;(data.num\\_bins));for(inti=0;i&lt;data.num\\_items;++i){for(intj=0;j&lt;data.num\\_bins;++j){x[i][j]=solver-&gt;MakeIntVar(0.0,1.0,\"\");}}// y[j] = 1 if bin j is used.std::vector&lt;constMPVariable\\*&gt;y(data.num\\_bins);for(intj=0;j&lt;data.num\\_bins;++j){y[j]=solver-&gt;MakeIntVar(0.0,1.0,\"\");}\n```\n### Java\n```\nMPVariable[][]x=newMPVariable[data.numItems][data.numBins];for(inti=0;i&lt;data.numItems;++i){for(intj=0;j&lt;data.numBins;++j){x[i][j]=solver.makeIntVar(0,1,\"\");}}MPVariable[]y=newMPVariable[data.numBins];for(intj=0;j&lt;data.numBins;++j){y[j]=solver.makeIntVar(0,1,\"\");}\n```\n### C#\n```\nVariable[,]x=newVariable[data.NumItems,data.NumBins];for(inti=0;i&lt;data.NumItems;i++){for(intj=0;j&lt;data.NumBins;j++){x[i,j]=solver.MakeIntVar(0,1,$\"x\\_{i}\\_{j}\");}}Variable[]y=newVariable[data.NumBins];for(intj=0;j&lt;data.NumBins;j++){y[j]=solver.MakeIntVar(0,1,$\"y\\_{j}\");}\n```\nAs in the multiple knapsack example, you define an array of variables`x[(i,\nj)]`, whose value is 1 if item`i`is placed in bin`j`, and 0 otherwise.\nFor bin packing, you also define an array of variables,`y[j]`, whose value is 1\nif bin`j`is used&mdash;that is, if any items are packed in it&mdash;and 0\notherwise. The sum of the`y[j]`will be the number of bins used.\n### Define the constraints\nThe following code defines the constraints for the problem:\n### Python\n```\n# Constraints# Each item must be in exactly one bin.foriindata[\"items\"]:solver.Add(sum(x[i,j]forjindata[\"bins\"])==1)# The amount packed in each bin cannot exceed its capacity.forjindata[\"bins\"]:solver.Add(sum(x[(i,j)]\\*data[\"weights\"][i]foriindata[\"items\"])&lt;=y[j]\\*data[\"bin\\_capacity\"])\n```\n### C++\n```\n// Create the constraints.// Each item is in exactly one bin.for(inti=0;i&lt;data.num\\_items;++i){LinearExprsum;for(intj=0;j&lt;data.num\\_bins;++j){sum+=x[i][j];}solver-&g...",
      "url": "https://developers.google.com/optimization/pack/bin_packing"
    },
    {
      "title": "Google OR-Tools: OR-Tools Python Reference",
      "text": "Google OR-Tools: OR-Tools Python Reference\n![Logo](orLogo.png)|\nGoogle OR-Tools&#160;v9.15\na fast and portable software suite for combinatorial optimization\n|\nLoading...\nSearching...\nNo Matches\nOR-Tools Python Reference\nThis is the reference documentation for the Google OR-Tools Python wrappers.\nThis repository contains several components:\nLink with the C++ layer\n* ortools.init.python.init,\nKnapsack solver\n* ortools.algorithms.python.knapsack\\_solver,\nGraph and flow algorithms\n* ortools.graph.python.linear\\_sum\\_assignment,\n* ortools.graph.python.max\\_flow,\n* ortools.graph.python.min\\_cost\\_flow,\nRouting library and legacy Constraint Programming Solver\n* [ortools::constraint\\_solver::pywrapcp](namespaceortools_1_1constraint__solver_1_1pywrapcp.html),\nMinimalistic linear solver wrapper\n* [ortools::linear\\_solver::python::model\\_builder](namespaceortools_1_1linear__solver_1_1python_1_1model__builder.html)\nCP-SAT\n* [ortools::sat::python::cp\\_model](namespaceortools_1_1sat_1_1python_1_1cp__model.html),\n* ortools.util.python.sorted\\_interval\\_list,\n* [ortools::sat::cp\\_model\\_pb2](namespaceortools_1_1sat_1_1cp__model__pb2.html)\n* [ortools::sat::sat\\_parameters\\_pb2](namespaceortools_1_1sat_1_1sat__parameters__pb2.html)\nLegacy linear solver wrapper\n* [ortools::linear\\_solver::pywraplp](namespaceortools_1_1linear__solver_1_1pywraplp.html),\n* [ortools::linear\\_solver::linear\\_solver\\_pb2](namespaceortools_1_1linear__solver_1_1linear__solver__pb2.html),\nLinear solver backends\n* [ortools::bop::bop\\_parameters\\_pb2](namespaceortools_1_1bop_1_1bop__parameters__pb2.html),\n* [ortools::glop::parameters\\_pb2](namespaceortools_1_1glop_1_1parameters__pb2.html),\n* [ortools::pdlp](namespaceortools_1_1pdlp.html),\nPSPLIB Parser\n* ortools.scheduling.python.rcpsp\n[](doxygen_crawl.html)\n* Generated by[![doxygen](doxygen.svg)](https://www.doxygen.org/index.html)1.15.0",
      "url": "https://or-tools.github.io/docs/python/index.html"
    }
  ]
}