## Current Status
- Best CV score: 70.659944 from exp_008 (009_full_ensemble_v2) - BUT FAILED ON KAGGLE
- Best verified LB score: 70.6761 from exp_000 (baseline)
- Target: 68.919154 | Gap to target: 1.757 points (2.49%)
- Submissions used: 4/100 (96 remaining)

## Critical Issue: Experiment 009 Failed on Kaggle
The ensemble submission (70.659944) failed with "Overlapping trees in group 046".

**Root Cause Analysis:**
- The ensemble selected a DIFFERENT configuration for group 046 from another source file
- This configuration has overlaps that Kaggle's stricter detection catches but our local check doesn't
- The differences are NOT precision loss - they're entirely different tree positions (~0.028 shift in x/y)
- The baseline (70.676102) is VERIFIED to work on Kaggle

**Key Insight:** The ensemble found 24 N values with better scores, but some of those "better" configurations have overlaps that only Kaggle detects.

## Response to Evaluator
The evaluator correctly identified that the 009 submission failed due to overlaps, but the root cause is NOT precision loss - it's that the ensemble selected configurations from other source files that have overlaps our local check doesn't detect.

**Evaluator's recommendation:** Fix precision and resubmit
**My assessment:** The issue is NOT precision - it's that we need STRICTER overlap detection that matches Kaggle's. Simply preserving precision won't help because the ensemble selected entirely different configurations that have real overlaps.

## What We've Learned (10 Experiments)
1. **Baseline is at a strong local optimum** - 8 different optimization approaches (bbox3, parallel SA, deletion cascade, random init, lattice+SA, backward iteration) all failed to improve it
2. **Ensemble found improvements** - 24 N values had better scores in other source files
3. **Some "better" configs have overlaps** - Kaggle's detection is stricter than ours
4. **Backpacking won't help** - Baseline already has monotonically increasing side lengths
5. **Target requires 2.49% improvement** - Need ~0.00878 improvement per N on average

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Create Safe Ensemble with Strict Overlap Detection**
The ensemble approach DID find improvements. We just need to filter out configs with overlaps.

**Strategy:**
1. Use Kaggle's EXACT collision detection (from the metric notebook):
   - Decimal arithmetic with 25-digit precision
   - Scale factor of 1e15
   - Shapely's intersects() with proper polygon construction
2. For each N, only replace baseline config if:
   - Alternative has STRICTLY better score
   - Alternative passes STRICT overlap check
3. Submit the safe ensemble

**Expected outcome:** Score between 70.659944 and 70.676102 (some improvements will be kept, overlapping ones filtered out)

### 2. **[HIGH PRIORITY] Run Extended SA on Promising N Values**
The baseline is optimized, but maybe not fully. Focus SA on N values with worst efficiency:
- N=1 (0.661, 21% efficiency) - Already optimal (45 degrees)
- N=2-10 (0.38-0.45, 21-37% efficiency) - Most room for improvement
- Use the seshurajup parallel SA optimizer with MUCH longer runs (millions of iterations)

### 3. **[MEDIUM PRIORITY] Try Genetic Algorithm**
All our approaches have been local search. Try a global search:
- Population of configurations
- Crossover: combine good sub-arrangements from different configs
- Mutation: small perturbations
- Selection: keep best configs

### 4. **[MEDIUM PRIORITY] Constraint Programming**
Use OR-Tools or similar to find optimal placements:
- Define non-overlap constraints
- Minimize bounding box
- May find configurations SA misses

## What NOT to Try
- ❌ Simple backward iteration (already tried, 0 improvements)
- ❌ Deletion cascade (already tried, 0 improvements)
- ❌ Random initialization (produces 7x worse results)
- ❌ Lattice patterns without extensive SA (much worse than baseline)
- ❌ Ensemble without strict overlap checking (will fail on Kaggle)

## Validation Notes
- Use Kaggle's EXACT collision detection for overlap checking
- Decimal arithmetic with 25-digit precision
- Scale factor of 1e15
- Test on group 046 specifically (the one that failed)

## SUBMISSION STRATEGY
- Remaining submissions: 96
- **Submit after this experiment** - We have abundant submissions
- Priority: Get a VERIFIED score on LB that improves on 70.6761

## Next Experiment: 011_safe_ensemble
Create an ensemble that:
1. Starts with the verified baseline
2. Loads all 758 valid CSV files from snapshots
3. For each N, checks if any source has better score AND passes strict overlap check
4. Only replaces if BOTH conditions met
5. Validates the entire submission with strict overlap detection before submitting