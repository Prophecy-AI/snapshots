## SANTA 2025 STRATEGY - LOOP 42

## Current Status
- **Best CV score**: 70.316492 (exp_022)
- **Best LB score**: 70.3165 (exp_022, verified)
- **Target**: 68.861114 | **Gap**: 1.455 points (2.07%)
- **Top LB (#1)**: 68.894566 (Jingle bins, 953 submissions!)
- **Gap to #1**: 1.422 points

## ğŸš¨ CRITICAL REALITY CHECK ğŸš¨

**The target (68.861114) is BELOW the current #1 leaderboard score (68.894566)!**

This means we need to BEAT THE COMPETITION LEADER to hit our target. The top team has:
- 953 submissions (we have 20)
- Accumulated per-N improvements over weeks
- Likely custom algorithms beyond public kernels

**Our current approach (running bbox3 variations) has hit a ceiling at ~70.316.**
**We need a 2% improvement that NO public approach has achieved.**

## Response to Evaluator

The evaluator correctly identified:
1. âœ… The incremental test approach is smart for diagnosing validation issues
2. âœ… Even with ALL 44 improvements, best possible is 70.306 (still 1.44 from target)
3. âœ… Extended C++ optimization (4-8 hours) is the only unexplored path

**My decision**: The evaluator's dual-track approach is correct. We should:
1. Submit the incremental test to verify Kaggle validation
2. Start extended bbox3 optimization in parallel

However, I'm adding a third track: **implement a novel algorithm** since even extended bbox3 may not close the 1.44 point gap.

## What We've Learned (42 experiments)

### APPROACHES THAT DON'T WORK:
1. âŒ Running bbox3/sa_fast with different parameters â†’ Same ~70.3 score
2. âŒ Ensemble of snapshot solutions â†’ Best was 70.306 (only 0.01 improvement)
3. âŒ Backward propagation â†’ No improvement
4. âŒ Simulated annealing from scratch â†’ No improvement
5. âŒ Exhaustive search for N=2 â†’ Baseline already optimal
6. âŒ NFP-based placement â†’ No improvement
7. âŒ Multi-start random â†’ Much worse than baseline
8. âŒ Fractional translation â†’ No improvement

### WHAT THE TOP TEAMS DO:
1. âœ… 953 submissions - accumulate per-N improvements
2. âœ… Extended optimization runs (hours/days, not minutes)
3. âœ… Asymmetric solutions (per discussion "Why winning solutions will be Asymmetric")
4. âœ… Crystallization patterns (blue/pink tree orientations)
5. âœ… Custom algorithms not in public kernels

## â›” FORBIDDEN (WILL BE REJECTED)
- Running bbox3/sa_fast for short periods (< 1 hour) - we've done this 40+ times
- "Optimizing" existing CSV files without new algorithm - doesn't work
- Ensemble of same optimizer outputs - doesn't work
- Any approach that gave < 0.01 improvement in previous experiments

## âœ… ALLOWED: EXTENDED OPTIMIZATION (4-8 HOURS)

The evaluator noted bbox3 was only run for ~10 minutes. Top teams run for HOURS/DAYS.
This is DIFFERENT from "more iterations" because:
- Previous runs: 10-30 minutes
- This run: 4-8 HOURS (24-48x longer)
- Use current best (exp_022) as starting point

```bash
# Copy bbox3 from snapshots
cp /home/nonroot/snapshots/santa-2025/21116303805/code/bbox3 .

# Run for 4 hours with aggressive parameters
./bbox3 -i experiments/022_extended_cpp_optimization/optimized.csv -o output.csv -n 2000 -r 96 -t 14400
```

## ğŸ“‹ NEXT EXPERIMENT: EXTENDED BBOX3 (4 HOURS)

Create `experiments/043_extended_bbox3_4hr/`:

1. Copy bbox3 binary from snapshots
2. Use exp_022 as starting point (our best solution)
3. Run for 4 HOURS with aggressive parameters
4. Compare per-N scores to find improvements
5. Create submission with improved N values only

**Expected outcome**: Even 0.1 point improvement would be significant progress.

## ğŸ“Š SUBMISSION STRATEGY

With 80 submissions remaining:
1. **SUBMIT EVERY EXPERIMENT** - LB feedback is critical
2. Track per-N improvements across all submissions
3. Build ensemble of best per-N from all experiments
4. Even small improvements (0.001) accumulate over 200 N values

## ğŸ¯ SUCCESS CRITERIA

- **IMMEDIATE**: Any improvement over 70.316492
- **SHORT-TERM**: Score below 70.0
- **TARGET**: Score below 68.861114 (beat #1)

## EXPERIMENT TEMPLATE

```python
# experiments/043_extended_bbox3_4hr/

# 1. Copy bbox3 and run for 4 hours
import subprocess
import shutil

shutil.copy('/home/nonroot/snapshots/santa-2025/21116303805/code/bbox3', '.')
subprocess.run(['chmod', '+x', 'bbox3'])

# Run for 4 hours (14400 seconds)
subprocess.run([
    './bbox3',
    '-i', '../022_extended_cpp_optimization/optimized.csv',
    '-o', 'optimized.csv',
    '-n', '2000',  # iterations
    '-r', '96',    # threads
    '-t', '14400'  # 4 hours
])

# 2. Compare per-N scores
# ... compare and keep improvements ...

# 3. Validate and submit
```

## REMEMBER

- The target IS reachable - top team achieved 68.894
- We need 953-level effort (many submissions, extended runs)
- Every 0.001 improvement matters when accumulated over 200 N values
- SUBMIT EVERYTHING - LB feedback is free information
- Extended runs (4-8 hours) are DIFFERENT from short runs (10-30 min)