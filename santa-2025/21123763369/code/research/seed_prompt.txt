# Santa 2025 - Evolved Strategy (Loop 1)

## Current Status
- Best CV score: 70.7438 from exp_000 (001_baseline_preoptimized)
- Best LB score: 70.7438 (perfect CV-LB match!)
- Target: 68.922808 | Gap to target: 1.82 points (2.64%)
- Submissions used: 1/100 (99 remaining)

## CV-LB Relationship Analysis
- Perfect match: CV = LB (no calibration issues)
- Local scoring is accurate and trustworthy
- This is an optimization problem, not ML - no distribution shift concerns

## Response to Evaluator
The evaluator correctly identified that:
1. ✅ Baseline is correctly established and validated
2. ✅ No optimization has been run yet - only baseline download
3. ✅ Need to begin actual optimization immediately

**Agreed actions:**
- Extract and compile bbox3.cpp from jazivxt_why-not kernel
- Run optimization loops with various parameters
- Apply fix_direction post-processing
- Submit improved results

## Key Insights from Analysis
1. **Score distribution**: Top 20 N values contribute 11.4% of total score
2. **Small N matters**: n=1 alone contributes 0.66 points (0.94% of total)
3. **Improvement needed**: Average 0.009 per N value, or ~2.6% overall
4. **Perfect CV-LB match**: Our local scoring is accurate

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Run bbox3 C++ Optimizer
**Source:** `/home/code/research/kernels/jazivxt_why-not/why-not.ipynb`

Extract bbox3.cpp and compile:
```bash
# Extract from notebook (look for %%writefile bbox3.cpp cell)
g++ -O3 -fopenmp -march=native -std=c++17 -o bbox3 bbox3.cpp
```

Run optimization:
```bash
# Short test run first
./bbox3 -n 2000 -r 60

# Medium run
./bbox3 -n 5000 -r 128

# Long run (if time permits)
./bbox3 -n 10000 -r 256
```

### 2. **[HIGH PRIORITY]** Apply fix_direction Post-processing
After each optimization run, apply rotation optimization using scipy.optimize.minimize_scalar on the convex hull of all tree points.

### 3. **[HIGH PRIORITY]** Ensemble Best Configurations
**Source:** `/home/code/research/kernels/jonathanchan_santa25-ensemble-sa-fractional-translation/`

For each N from 1 to 200:
- Compare configurations from multiple optimization runs
- Keep the one with smallest bounding box side length
- Merge into final submission

### 4. **[MEDIUM PRIORITY]** Run tree_packer + Backward Propagation
**Source:** `/home/code/research/kernels/smartmanoj_santa-claude/santa-claude.ipynb`

### 5. **[MEDIUM PRIORITY]** Fractional Translation Fine-tuning
After SA optimization, apply micro-adjustments in 8 directions with decreasing step sizes.

## What NOT to Try
- ❌ Starting from sample_submission.csv (too far from target)
- ❌ Reinforcement learning approaches (proven ineffective)
- ❌ Pure Python optimization (too slow)

## SUBMISSION STRATEGY
- Remaining submissions: 99
- **Submit after EVERY experiment** - we have abundant submissions
- LB feedback is free information - USE IT!

## Experiment 2 Plan
1. Extract bbox3.cpp from jazivxt_why-not kernel
2. Compile with OpenMP
3. Run short optimization (2-5 min)
4. Apply fix_direction
5. Validate no overlaps
6. Score and submit
7. If improved, run longer optimization