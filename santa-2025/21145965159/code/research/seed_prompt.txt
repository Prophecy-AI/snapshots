# Santa 2025 - Christmas Tree Packing Optimization

## Current Status
- Best CV score: 70.675478 from exp_003 (005_long_optimization)
- Best LB score: 70.676102 (from exp_001, exp_002)
- Target: 68.919154 | Gap to target: 1.756 points (2.55%)

## CRITICAL: Submit the Improved Candidate!
**The improved candidate (70.675478) has NOT been submitted yet!**
- candidate_003.csv with score 70.675478 should be submitted immediately
- This is the FIRST ACTUAL IMPROVEMENT we've achieved
- We need to verify the LB score matches CV before investing more optimization time

## Key Analysis Findings (Loop 4)
1. **Target IS achievable**: Theoretical minimum is 65.99, target is 68.92
2. **Efficiency gap**: Current avg efficiency 0.698, need 0.716 (2.55% improvement)
3. **Small N has most potential**: N=1-10 alone have 1.03 points improvement potential
4. **N=1 is the worst**: Efficiency 0.37 vs best 0.74, contributes 0.33 points alone

## Response to Evaluator
The evaluator correctly identified:
1. ✅ The eazy optimizer found real improvement (0.000624) - FIRST BREAKTHROUGH!
2. ✅ The improvement rate is too slow at current pace
3. ✅ Multiple advanced techniques haven't been tried yet
4. ✅ The improved candidate should be submitted to verify LB

**Key insight**: The eazy optimizer uses complex orbital moves, square calculus pressure, and pulsing factor - these are more sophisticated than simple SA and explain why it found improvement.

## Recommended Approaches (Priority Order)

### 1. **[IMMEDIATE]** Submit candidate_003.csv
- Score: 70.675478 (improvement of 0.000624 from baseline)
- Must verify LB matches CV before investing more optimization time

### 2. **[HIGH PRIORITY]** Run MUCH longer optimization
The eazy optimizer improved by 0.000624 in ~20 min. Try:
- Run for 2-4 hours instead of 20 minutes
- The improvement may scale with time
- Use multiple random restarts with different seeds

### 3. **[HIGH PRIORITY]** Try different optimizers in parallel
- **bbox3_whynot**: Uses fluid dynamics, hinge pivot, density gradient flow
- **SA with translations**: From egortrushin kernel, different move set
- **Backward propagation**: From crodoc kernel, propagate good patterns

### 4. **[MEDIUM PRIORITY]** Focus on small N values
- N=1 has 0.33 points improvement potential alone
- N=1-10 have 1.03 points total potential
- These are more tractable for exhaustive/near-exhaustive search
- Try different initial configurations for small N

### 5. **[MEDIUM PRIORITY]** Try fundamentally different approaches
From research:
- **Jostle algorithm**: Diversified placement with unrestricted rotation
- **Block generation**: Combine 2+ pieces into composite blocks
- **Knowledge reuse**: Transfer piece-ordering from similar instances
- **Fine-tuning operations**: Movement, filling, replacement, swap

## What NOT to Try
- Running the same optimizer with same parameters (already at local optimum)
- Ensembling pre-optimized solutions (already ensembled, no improvement possible)
- Building from scratch without optimization (will be worse than baseline)

## Validation Notes
- Always validate for overlaps before submitting
- Use the exact tree geometry from the getting-started notebook
- Preserve full string precision when saving (use 's' prefix format)

## SUBMISSION STRATEGY
- Remaining submissions: 93
- **Submit after this experiment? YES - IMMEDIATELY submit candidate_003.csv**
- We have abundant submissions - use them for feedback!
- The improved score needs LB verification

## Technical Details
- Tree area: 0.245625
- Best efficiency achieved: 0.7444 (at N=181)
- Worst efficiency: 0.3715 (at N=1)
- Required average efficiency for target: 0.7159

## Key Files
- Current best: `/home/code/experiments/005_long_optimization/submission.csv` (70.675478)
- Baseline: `/home/nonroot/snapshots/santa-2025/21116303805/code/preoptimized/ensemble.csv` (70.676102)
- Eazy optimizer: `/home/code/experiments/005_long_optimization/eazy` (compiled)
- bbox3_whynot: `/home/code/experiments/005_long_optimization/bbox3_whynot` (compiled)
