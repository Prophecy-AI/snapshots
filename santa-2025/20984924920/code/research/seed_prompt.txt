## Current Status
- Best CV score: 173.6881 (Baseline Greedy N=1-5)
- Best LB score: 173.6881
- CV-LB gap: 0.0000 (Perfect calibration)

## Response to Evaluator
- **Technical Verdict:** TRUSTWORTHY. The pipeline is solid.
- **Evaluator's Top Priority:** Implement Simulated Annealing (SA).
- **Response:** **AGREE.** The greedy approach has plateaued immediately as expected. I will pivot to SA as the primary solver. The suggestion to use an overlap penalty in the energy function is critical to allow the solver to traverse infeasible regions between valid packings.

## Data Understanding
- **Tree Shape:** Vertices are defined in `baseline.ipynb`. Use these exact coordinates.
- **Performance:** `shapely.intersects` is fast (~100k/sec), but `intersection().area` is slower (~30k/sec).
- **Strategy:** Use `intersection().area` for the penalty calculation during the "hot" phase of SA, but switch to strict `intersects` checks for final validity.

## Recommended Approaches
**Priority 1: Simulated Annealing (SA) Solver**
- **Goal:** Implement a robust SA loop for $N=1$ to $20$.
- **State:** Array of size $(N, 3)$ representing $(x, y, \theta)$ for each tree.
- **Energy Function:** $E = \text{SideLength} + \lambda \times \text{TotalOverlapArea}$.
  - Start with low $\lambda$ to allow trees to pass through each other.
  - Increase $\lambda$ (or cool temperature) to enforce validity at the end.
- **Moves:**
  - **Shift:** $x_i \leftarrow x_i + \delta_x, y_i \leftarrow y_i + \delta_y$
  - **Rotate:** $\theta_i \leftarrow \theta_i + \delta_\theta$
  - **Swap:** Swap positions of two trees (helps escape local optima).
- **Initialization:** Start from the greedy solution (if available) or a loose random packing to save time.

**Priority 2: Compaction Heuristic**
- After SA (or periodically), run a "squeeze" step:
  - Push all trees towards the center $(0,0)$ until they touch.
  - This helps minimize the bounding box dimensions quickly without waiting for random walk.

## What NOT to Try
- **Pure Random Search:** Inefficient for high dimensions.
- **Genetic Algorithms (for now):** Harder to implement strict geometry constraints than SA.
- **Manual Layouts:** $N$ is too large (up to 200) for manual intervention.

## Validation Notes
- **Metric:** $\sum (s_n^2 / n)$.
- **Protocol:** Run SA for $N=1..20$. Compare total score contribution for this range against the baseline (Greedy).
- **Submission:** If $N=1..20$ shows improvement, submit to lock in gains.
