# Santa 2025 Christmas Tree Packing - Evolved Seed Prompt (Loop 1)

## Current Status
- **Best CV score:** 70.647327 from exp_000 (001_baseline)
- **Best LB score:** 70.647327 (CV = LB, as expected for optimization problem)
- **Target:** 68.919154
- **Gap to target:** 1.728173 (2.45% improvement needed)

## LB Feedback Analysis
- CV = LB exactly (no gap) - this is expected for a pure optimization problem
- The baseline is the bucket-of-chump pre-optimized dataset
- This is already the best publicly available solution

## Response to Evaluator
The evaluator correctly identified that:
1. The baseline is established correctly at 70.647327
2. The 2.45% gap is substantial and requires fundamentally different approaches
3. Micro-optimization (more SA iterations) will NOT close this gap
4. Small N values (1-50) contribute most per-N and are tractable for exhaustive search

**Agreed actions:**
- Focus on small N (1-20) where exhaustive/near-exhaustive search is tractable
- Implement ensemble approach to combine best per-N from multiple sources
- Try backward propagation to improve smaller N from larger N patterns

## Key Insights from Research

### From Kernels:
1. **Ensemble kernel (jonathanchan)**: Combines 15+ public solutions by taking best per-N, then runs C++ SA with fractional translation. N=1 optimal rotation is 45 degrees.
2. **BackPacking kernel (crodoc)**: Backward iteration from N=200 to N=1. When N config is worse than larger N, copy best and drop trees.
3. **bbox3 optimizer**: C++ SA with complex number coordination, fluid dynamics, hinge pivot. Pre-optimized solutions are at local optima.

### From Analysis:
- Score distribution: N=1-50: 19.04, N=51-100: 17.63, N=101-150: 17.14, N=151-200: 16.84
- Top N by score contribution: N=1 (0.661), N=2 (0.451), N=3 (0.435), N=5 (0.417), N=4 (0.417)
- N=1 optimal side at 45 degrees: 0.813173 (score 0.661250)

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Implement Ensemble Approach**
Combine best per-N from multiple public solutions:
- bucket-of-chump dataset (current baseline)
- saspav/santa-2025.csv
- Other public kernels' outputs

For each N=1-200, take the configuration with the lowest score.

### 2. **[HIGH PRIORITY] Small N Optimization (N=1-20)**
- N=1: Verify 45-degree rotation is optimal (analytically solvable)
- N=2-10: Try systematic search over rotation angles and positions
- N=11-20: Try beam search or genetic algorithms

### 3. **[MEDIUM PRIORITY] Backward Propagation**
- Start from N=200, work backward
- If N config is worse than (N+1) config minus one tree, copy and drop
- This propagates good patterns from larger to smaller N

### 4. **[MEDIUM PRIORITY] Fractional Translation**
- After ensemble, run micro-movements (0.001-0.00001 steps in 8 directions)
- Can squeeze out small improvements

## What NOT to Try
- ❌ Running more SA iterations on pre-optimized solutions (diminishing returns)
- ❌ Random perturbations without structure
- ❌ Focusing only on large N (small N has more impact per-N)

## Concrete Next Experiment: 002_ensemble

**Goal:** Implement ensemble approach to combine best per-N from multiple sources

**Steps:**
1. Load bucket-of-chump solution (current baseline)
2. Load saspav/santa-2025.csv solution
3. For each N=1-200, compare scores and keep the better configuration
4. Calculate total score
5. If improved, save as new submission

**Expected outcome:** Small improvement (0.01-0.1) from combining best of both solutions

## Validation Notes
- Use Shapely for polygon operations
- Check for overlaps before submission
- Verify score calculation matches Kaggle's

## SUBMISSION STRATEGY
- **Remaining submissions:** 99
- **Submit after this experiment?** YES - we have abundant submissions and need LB feedback
- Submit even if score is similar to baseline - confirms ensemble approach works