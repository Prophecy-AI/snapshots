# Santa 2025 Christmas Tree Packing - Evolved Seed Prompt (Loop 2)

## Current Status
- **Best CV score:** 70.647306 from exp_001 (002_ensemble)
- **Best LB score:** 70.647306 (CV = LB exactly, as expected for optimization)
- **Target:** 68.919154
- **Gap to target:** 1.728152 (2.45% improvement needed)

## LB Feedback Analysis
- CV = LB exactly for both submissions (no gap)
- This is expected for optimization problems - no train/test distribution shift
- The ensemble of 2 solutions (boc + saspav) gave only 0.00002 improvement
- Both solutions are at the same local optimum

## Response to Evaluator

**Agreed with evaluator's assessment:**
1. ✅ The ensemble of only 2 solutions was insufficient - jonathanchan combines 15+ sources
2. ✅ The C++ SA optimizer with fractional translation is critical for squeezing out improvements
3. ✅ Small N focus (N=1-20) was not attempted despite being recommended

**Key insight:** The evaluator correctly identified that we only scratched the surface with 2 solutions. The jonathanchan kernel explicitly shows that combining 15+ solutions and running C++ optimization is the proven approach.

**Action plan:**
1. Download additional public solutions (SmartManoj/Santa-Scoreboard from GitHub)
2. Run the bbox3 C++ optimizer with longer iterations
3. Implement fractional translation in Python if C++ is not available

## Critical Gap Analysis

The 1.73 point gap (2.45%) is SUBSTANTIAL. This cannot be closed by:
- ❌ More SA iterations on pre-optimized solutions (diminishing returns)
- ❌ Simple ensembling of 2 similar solutions (both at same local optimum)
- ❌ Backward propagation alone (found 0 improvements)

This CAN be closed by:
- ✅ Combining MANY more public solutions (15+ sources)
- ✅ Running C++ optimizer with fractional translation
- ✅ Focusing on small N where per-N contribution is highest
- ✅ Trying fundamentally different initial configurations

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY] Download More Solutions + Full Ensemble**
The jonathanchan kernel combines 15+ sources. We only have 2.

**Concrete steps:**
1. Download SmartManoj/Santa-Scoreboard from GitHub: `wget https://raw.githubusercontent.com/SmartManoj/Santa-Scoreboard/main/submission.csv`
2. Check if other kernels have output CSVs we can use
3. Create full ensemble by taking best per-N from ALL sources

### 2. **[HIGH PRIORITY] Run bbox3 C++ Optimizer**
The bbox3 binary is available at `/home/code/exploration/preoptimized/bbox3`.

**Concrete steps:**
1. Run bbox3 with longer iterations: `./bbox3 -n 5000 -r 4`
2. Try different parameter combinations
3. Focus on N values where current score is worst

### 3. **[HIGH PRIORITY] Implement Fractional Translation**
The jonathanchan kernel uses micro-movements (0.001 to 0.00001) in 8 directions.

**Concrete steps:**
1. For each tree, try moving in 8 directions by small amounts
2. Keep moves that reduce bounding box without causing overlaps
3. Repeat until no improvement

### 4. **[MEDIUM PRIORITY] Small N Exhaustive Search**
N=1-20 contribute most per-N and are tractable for exhaustive search.

**Concrete steps:**
1. N=1 is already optimal at 45 degrees (verified)
2. For N=2-10, try systematic search over rotation angles
3. For N=11-20, try beam search or genetic algorithms

## What NOT to Try
- ❌ Running more SA iterations on the same pre-optimized solutions
- ❌ Simple ensembling of only 2 solutions (already tried, no improvement)
- ❌ Backward propagation alone (already tried, 0 improvements)
- ❌ Random perturbations without structure

## Concrete Next Experiment: 003_full_ensemble_bbox3

**Goal:** Download more solutions, create full ensemble, run bbox3 optimizer

**Steps:**
1. Download SmartManoj/Santa-Scoreboard solution from GitHub
2. Load all available solutions (boc, saspav, smartmanoj)
3. Create ensemble by taking best per-N from all sources
4. Run bbox3 optimizer with `-n 5000 -r 4` on the ensemble
5. Calculate final score and submit

**Expected outcome:** Improvement of 0.01-0.1 from better ensemble + optimization

## Validation Notes
- Use Shapely for polygon operations
- Verify score calculation matches Kaggle's
- Check for overlaps before submission

## SUBMISSION STRATEGY
- **Remaining submissions:** 89
- **Submit after this experiment?** YES - we have abundant submissions
- LB feedback is critical for understanding what works