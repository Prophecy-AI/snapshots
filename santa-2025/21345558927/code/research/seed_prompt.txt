## Current Status
- Best CV score: 70.316648 from exp_020 (whynot_ensemble)
- Best LB score: 70.353516 (exp_016) - NOT YET SUBMITTED exp_020
- Target: 68.877877 | Gap to target: 1.44 points (2.09%)

## CRITICAL: SUBMIT exp_020 IMMEDIATELY!
The new ensemble (70.316648) is 0.037 better than our best LB (70.353516).
This MUST be submitted to get LB feedback.

## Submission Log
| Exp | Approach | CV | LB | Notes |
|-----|----------|----|----|-------|
| 001 | valid_baseline | 70.615 | 70.615 | First valid submission |
| 002 | backward_prop | 70.615 | 70.615 | No improvement |
| 007 | ensemble_frac | 70.266 | ERROR | NaN data - invalid |
| 008 | snapshot_ens | 70.373 | ERROR | Overlaps in group 002 |
| 009 | highprec_ens | 70.341 | ERROR | Overlaps in group 123 |
| 010 | safe_ensemble | 70.365 | 70.365 | MIN_IMPROVEMENT=0.001 |
| 013 | selective | 70.342 | ERROR | Overlaps in group 089 |
| 016 | mega_external | 70.354 | 70.354 | Current best LB |
| 019 | comprehensive | 70.343 | PENDING | Small improvement |
| 020 | whynot_ensemble | 70.317 | PENDING | **SUBMIT THIS** |

## What We've Learned
1. **Overlap validation is CRITICAL** - 5/9 submissions failed due to overlaps
2. **External data is the key lever** - team-blend (70.331) is better than our baseline
3. **MIN_IMPROVEMENT threshold was too conservative** - lowering to 1e-8 found 85 more improvements
4. **2517 potential improvements rejected due to overlaps** - need better overlap handling

## Response to Evaluator
The evaluator correctly identified that:
1. ✅ The MIN_IMPROVEMENT=0.001 threshold was leaving gains on the table
2. ✅ The why-not and team-blend submissions are better than our current best
3. ✅ We should use team-blend as the new baseline

I've implemented their recommendation:
- Used team-blend (70.331636) as base instead of exp_016 (70.353516)
- Lowered MIN_IMPROVEMENT to 1e-8
- Found 85 improvements totaling 0.015 points
- New score: 70.316648 (improvement of 0.037 over previous best)

## IMMEDIATE NEXT STEPS

### Step 1: SUBMIT exp_020 (MANDATORY)
The submission is ready at /home/submission/submission.csv
CV score: 70.316648
Expected LB: ~70.317 (CV-LB match is perfect for this problem)

### Step 2: Analyze Per-N Scores
After submission, analyze which N values are still weak:
```python
# Compare per-N scores to theoretical minimum
for n in range(1, 201):
    my_score = get_score(n)
    theoretical_min = estimate_theoretical_min(n)
    gap = my_score - theoretical_min
    if gap > 0.01:
        print(f"N={n}: gap={gap:.4f} - room for improvement")
```

### Step 3: Focus on High-Impact N Values
From previous analysis:
- N=1 contributes 0.661 to total score (already optimal)
- N=2-10 contribute ~3.5 to total score
- Small N values have highest per-N scores - optimize these first

## Strategy for Reaching Target

### Gap Analysis
- Current: 70.316648
- Target: 68.877877
- Gap: 1.44 points (2.09%)

### Potential Sources of Improvement

1. **More External Data Sources** (estimated: 0.1-0.3 points)
   - Top teams use 17-19 data sources, we have ~10
   - Search for more Kaggle datasets with santa-2025 solutions
   - Download more kernel outputs

2. **Better Overlap Handling** (estimated: 0.1-0.2 points)
   - 2517 improvements rejected due to overlaps
   - Some of these might be fixable with small perturbations
   - Try "repair" approach: if overlap detected, slightly adjust positions

3. **Run bbox3 Longer** (estimated: 0.05-0.1 points)
   - Top kernels run bbox3 for 3+ hours with multiple restarts
   - We haven't done extended bbox3 runs

4. **Novel Algorithms** (estimated: ???)
   - All Python optimization attempts have failed
   - The baseline is at an extremely strong local optimum
   - Need fundamentally different approach

## ⛔ FORBIDDEN (WILL FAIL)
- Running bbox3/sa_fast binaries (GLIBC incompatible)
- Ensembling files with overlaps (will fail Kaggle validation)
- Using ensemble_best.csv or candidate_*.csv (have overlaps)
- MIN_IMPROVEMENT > 0.001 (leaves gains on the table)

## ✅ REQUIRED FOR NEXT EXPERIMENT
1. SUBMIT exp_020 to get LB feedback
2. If LB matches CV (~70.317), continue with more external data
3. If LB fails, investigate which N values have overlaps
4. Track per-N improvements to identify weak spots

## Key Insight
The problem is essentially solved by external data sources. The top teams have:
- More data sources (17-19 vs our 10)
- Better ensemble strategies
- Longer optimization runs

Our path forward is:
1. Get more external data
2. Better ensemble all available sources
3. Submit frequently to get LB feedback
