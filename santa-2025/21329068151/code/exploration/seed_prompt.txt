# Santa 2025 - Christmas Tree Packing Challenge - Evolved Seed Prompt

## Current Status
- Best CV score: 70.572798 (from better_submission found in snapshot 21145966992)
- Previous baseline: 70.615745 (from snapshot 21328310479)
- Best LB score: N/A (no submissions yet)
- Target: 68.894234 | Gap to target: 1.678564

## Response to Evaluator
The evaluator correctly identified several critical blind spots:
1. **bbox3 optimizer available but not used** - ADDRESSED: I've copied bbox3 to /home/code/ and verified it works
2. **Better pre-optimized submissions exist** - ADDRESSED: Found score 70.572798 in snapshot 21145966992 (0.043 better)
3. **No Kaggle submission yet** - WILL ADDRESS: Submit baseline to verify CV-LB correlation
4. **Rotation optimization not applied** - WILL ADDRESS: Next experiment should apply fix_direction

The evaluator's top priority (set up bbox3 and run optimization) is the correct approach. However, I've also discovered that the current baseline is already quite optimized - running bbox3 with -n 1000 -r 16 didn't improve the 70.572798 score.

## Key Insights from Analysis
1. **Current best submission (70.572798) is already well-optimized** - bbox3 couldn't improve it with short runs
2. **Gap to target is 1.68 points** - This is substantial and requires significant optimization
3. **Small N values contribute most to score** - n=1 contributes 0.661, n=2 contributes 0.451
4. **bbox3 works** - Reads submission.csv, outputs optimized submission.csv, uses -n (iterations) and -r (rounds)

## Available Tools
- **bbox3**: /home/code/bbox3 - SA optimizer (working)
- **fix_direction**: Rotation optimization from kernels (not yet implemented)
- **Preoptimized submissions**: Various in /home/nonroot/snapshots/

## Recommended Approaches (Priority Order)

### 1. **[HIGHEST PRIORITY]** Submit baseline to Kaggle
- We have 98 submissions remaining - LB feedback is free
- Verify CV score matches LB score
- Establish baseline for future comparisons

### 2. **[HIGH PRIORITY]** Run extended bbox3 optimization
- Current submission hasn't been optimized with long runs
- Try: `./bbox3 -n 5000 -r 60` (will take ~30-60 minutes)
- This is the proven approach from top kernels

### 3. **[HIGH PRIORITY]** Implement fix_direction (rotation optimization)
- From the best-keeping-bbox3-runner kernel
- Optimizes global rotation angle to minimize bounding box
- Can provide 0.01-0.1 improvement per configuration

### 4. **[MEDIUM PRIORITY]** Focus on small N configurations
- n=1 to n=20 contribute disproportionately to score
- Manual optimization or exhaustive search for these
- Even small improvements here have big impact

### 5. **[MEDIUM PRIORITY]** Backward propagation
- Use N+1 configurations to improve N configurations
- Remove boundary-touching trees from N+1 to get better N

## What NOT to Try
- Running bbox3 with short iterations (already tried, no improvement)
- Using the older baseline (70.615745) - we have a better one
- Implementing SA from scratch - bbox3 is already optimized

## Validation Notes
- CV scheme: Calculate score = Σ(side²/n) for n=1 to 200
- Overlap validation: Use Shapely STRtree for collision detection
- Submission format: id,x,y,deg with 's' prefix for values

## SUBMISSION STRATEGY
- Remaining submissions: 98
- Submit after this experiment? **YES** - we have abundant submissions, need LB feedback
- Submit the better baseline (70.572798) to establish LB baseline

## Next Experiment Plan
1. Submit current baseline to Kaggle
2. Run bbox3 with extended parameters (-n 5000 -r 60)
3. Apply fix_direction to the result
4. Calculate new score and compare
5. Submit improved solution if better
