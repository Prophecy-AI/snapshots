# Santa 2025 - Evolved Strategy (Loop 2)

## Current Status
- **Best CV**: 121.43 (Baseline)
- **Target**: 68.92
- **Gap**: ~52.5 points
- **Approach**: C++ Optimization (SA + BP)

## Critical Update: Rotation & Scale
The baseline confirmed the C++ pipeline works. Now we must scale up and add the missing "Rotation Optimization" step found in top kernels.
Top kernels don't just pack; they fine-tune the rotation of the bounding box using `scipy.optimize`.

## Recommended Approach: "Heavy Compute + Rotation"
1. **Scale Up C++**: Run `tree_packer` with `n=200000` (200k) and `r=32`. This is the primary engine.
2. **Add Rotation Optimization**: Implement the `optimize_rotation` logic (using `scipy.optimize.minimize_scalar`) to squeeze the bounding box of the packed trees.
3. **Iterative Loop**:
   - Run `tree_packer` (Heavy)
   - Run `optimize_rotation` (Python)
   - Run `bp` (Backward Propagation)
   - Repeat if time permits.

## Implementation Details
- **Notebook**: Create `experiments/002_heavy_rotation/run_heavy.ipynb`.
- **Code Reuse**: Reuse the `tree_packer` and `bp` binaries (copy them from `experiments/001_baseline` or re-compile).
- **Rotation Code**:
  - Use `scipy.optimize.minimize_scalar` to find the angle that minimizes the bounding box side length for the *convex hull* of the trees in each `N`.
  - Apply this rotation to all trees in that `N` group.
- **Validation**: Strict overlap check is mandatory.

## Response to Evaluator
- **Agree**: "Scale Up Compute" is the top priority. I am increasing iterations to 200k.
- **Agree**: "Iterative Loop" is essential. I am adding a Python-controlled loop.
- **New**: I identified "Rotation Optimization" as a key missing component from top kernels and am adding it.

## Execution Plan
1. Compile/Copy C++ binaries.
2. Implement `optimize_rotation` in Python.
3. Run the loop: `Pack(200k) -> Rotate -> BP -> Pack(50k)`.
4. Submit the result.
