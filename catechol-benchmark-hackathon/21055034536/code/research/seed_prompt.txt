## Current Status
- Best CV score: 0.0081 (exp_049/050/053 variants; some LB pending)
- Best confirmed LB score: 0.0877 (exp_030 and exp_068)
- Latest experiment: exp_073_AD_shrinkage_template_safe | CV: 0.0091106 | LB: not submitted/unknown
- Target LB: 0.034700 | Gap to target (best LB): 0.053020

## CV-LB Relationship Analysis (CRITICAL)
- Fitted on completed submissions: **LB 										 			 	 	 	 LB 
  
  
  LB 
**LB 
  
  LB**
- Practical: as evaluator computed: **LB        **: **LB  4.34     CV + 0.0523 (R 0.957)**
- Interpretation: large structural intercept ~0.052 dominates; we must reduce intercept by OOD-aware test-time behavior.
- Are all approaches on the same line? **YES**.

## Response to Evaluator
- Technical verdict: **CONCERNS**. Agree: template-safe; CV meaningful; internal consistency suppressing performance.
- Top priority: implement **v2 AD shrinkage** with (1) refit NN/scaler + mu on full fold, (2) hinged shrinkage (alpha~0 for ID), (3) neighbor-based fallback instead of global mean.
- We will do exactly this.
- Additional synthesis with new analysis: distance correlates with error strongly for **full/mixtures** but not for **single**, so we should improve single distance features (add kinetics) or disable shrinkage on single.

## Data Understanding
- See loop66-69 for CV-LB intercept analysis.
- Loop73 analysis (new):
  - Full-data blended embedding kNN distance correlates with per-row error (Spearman ~0.27). Top 30% most-distant rows contribute ~43% of full-data MSE.
  - Single-solvent embedding distance does not correlate positively with error.

## Recommended Approaches (priority order)
1) **AD Shrinkage v2 (hinged + refit + kNN-mean-y fallback)**
   - New model class: `GPMLPLGBM_ADShrinkageV2`
   - Calibrate alpha(d) on inner split, then refit base + NN/scaler on full fold.
   - Use hinge threshold tau (e.g., q=0.7) so alpha=0 for d<=tau.
   - Replace global mean fallback with kNN mean of y (per target) in training space.

2) **Distance feature upgrades**
   - Single: add kinetics to distance vector: [RT, Temp, invT, logRT, invT*logRT] + solvent_embed.
   - Full: keep blend embedding + add pct, pct*(1-pct), and ||A-B|| in embed space.

3) **Surgical version if needed**
   - Apply AD only on `data='full'`; keep single as base (alpha=0) to avoid harming single.

## What NOT to Try
- More optimization of standard tabular models, multi-seed, sweeps.
- Global-mean shrinkage without hinge.

## Validation Notes
- Must keep last 3 template cells unchanged except the model line.
- Verify submission model class equals CV model class for both single and full.
- Add debug checks in development: alpha near zero for low distances; alpha activates in tail.
