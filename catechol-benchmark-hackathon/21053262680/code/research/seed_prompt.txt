## Current Status
- Best CV score: 0.0081 from exp_049/exp_050/exp_053 (CatBoost+XGB ensemble)
- Best LB score: 0.0877 from exp_030 (CV=0.0083)
- Target: 0.0347 | Gap to target: 0.053 (153% above target)
- Submissions: 23 used, 4 remaining

## CV-LB Relationship Analysis (CRITICAL)
- Linear fit: LB = 4.31 × CV + 0.0525 (R² = 0.95)
- Intercept interpretation: Even at CV=0, expected LB is 0.0525
- Are all approaches on the same line? **YES** (12 valid submissions)
- **CRITICAL**: Intercept (0.0525) > Target (0.0347)
- Required CV for target: (0.0347 - 0.0525) / 4.31 = -0.0041 (IMPOSSIBLE!)

**The target is MATHEMATICALLY UNREACHABLE with approaches that fall on this line.**
We MUST find approaches that CHANGE THE CV-LB RELATIONSHIP (reduce the intercept).

## Response to Evaluator
- Technical verdict was TRUSTWORTHY. exp_111 is correctly implemented.
- Evaluator's top priority: **SUBMIT IMMEDIATELY** to test similarity hypothesis.
- Key concerns raised: CV is worse than best (0.010232 vs 0.0081), expected LB (0.097) is worse than best LB (0.0877).
- **I AGREE with the evaluator**: We must submit exp_111 to test if chemical similarity blending changes the CV-LB relationship. This is the most important thing to do now.

## Data Understanding
- Reference notebooks: See `exploration/evolver_loop113_analysis.ipynb` for CV-LB analysis
- Key patterns:
  1. All 12 valid submissions fall on the SAME CV-LB line (R²=0.95)
  2. exp_073 (RF) was an outlier with LB=0.1451 vs expected 0.089 - likely submission error
  3. The intercept (0.0525) represents STRUCTURAL extrapolation error
  4. Test solvents are structurally different from training solvents

## Recommended Approaches

### IMMEDIATE PRIORITY: Submit exp_111 to test hypothesis
exp_111 uses SimilarityAwareModel with chemical similarity blending:
- CV: 0.010232 (worse than best)
- Expected LB from line: 4.31 × 0.010232 + 0.0525 = 0.097
- **If actual LB < 0.090**: We've found a way to reduce the intercept!
- **If actual LB ≈ 0.097**: Similarity blending doesn't help, need different approach

### If exp_111 doesn't break the line, try these approaches:

1. **Adversarial Validation + Sample Weighting** (HIGH PRIORITY)
   - Train a classifier to distinguish train vs test solvents
   - Use classifier's predictions to weight training samples
   - Upweight samples that look like test solvents
   - This explicitly addresses distribution shift

2. **Domain Adaptation (CORAL/MMD)** (HIGH PRIORITY)
   - Correlation Alignment (CORAL): Align second-order statistics
   - Maximum Mean Discrepancy (MMD): Minimize distribution distance
   - These techniques explicitly minimize train-test distribution shift

3. **Conformal Prediction with Uncertainty-Based Blending** (MEDIUM PRIORITY)
   - Use conformal prediction to get prediction intervals
   - When interval is wide (high uncertainty), blend toward training mean
   - This is a principled way to be conservative on extrapolation

4. **Scaffold-Based Splitting** (MEDIUM PRIORITY)
   - Current: Leave-one-solvent-out
   - Alternative: Group solvents by chemical scaffold
   - This might better simulate the test distribution

5. **Pretrained Molecular Embeddings** (MEDIUM PRIORITY)
   - Uni-Mol, MolBERT, ChemGPT
   - These might capture chemical knowledge that generalizes better
   - Different from ChemBERTa which we've tried

6. **Physics-Informed Hard Constraints** (MEDIUM PRIORITY)
   - Embed Arrhenius kinetics as hard constraints (not just features)
   - Mass-action law constraints
   - These should generalize better to unseen conditions

## What NOT to Try
- ❌ More MLP/LGBM/XGB/CatBoost variants (all fall on same line)
- ❌ Multi-seed ensembles (optimization is forbidden when 153% from target)
- ❌ Hyperparameter tuning (doesn't change the intercept)
- ❌ Feature engineering alone (doesn't change the intercept)
- ❌ GNN/ChemBERTa without verifying submission cell model class matches CV

## Validation Notes
- CV scheme: Leave-one-solvent-out for single, Leave-one-ramp-out for full
- CV-LB gap: ~4.3x multiplier + 0.0525 intercept
- **CRITICAL**: Always verify submission cell model class matches CV model class
- exp_073 showed that submission errors can cause LB >> expected

## Submission Strategy
With 4 submissions remaining:
1. **SUBMIT exp_111 NOW** - Test chemical similarity hypothesis
2. If exp_111 breaks the line → iterate on similarity approach
3. If exp_111 doesn't break the line → try adversarial validation or domain adaptation
4. Save 1-2 submissions for final best approaches

## Key Insight
The problem is NOT model quality (CV is good at 0.0081).
The problem is DISTRIBUTION SHIFT (intercept is 0.0525).
We need approaches that REDUCE THE INTERCEPT, not improve CV.

## Benchmark Reference
- Benchmark paper achieved MSE = 0.0039
- Our target is 0.0347 (~9x worse than benchmark)
- Our best LB is 0.0877 (~22x worse than benchmark)
- The target IS reachable - it's between our best and the benchmark
